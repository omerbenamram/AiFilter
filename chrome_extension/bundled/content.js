!function(){function e(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},n={},o=t.parcelRequire6f25;null==o&&((o=function(e){if(e in r)return r[e].exports;if(e in n){var t=n[e];delete n[e];var o={id:e,exports:{}};return r[e]=o,t.call(o.exports,o,o.exports),o.exports}var i=Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){n[e]=t},t.parcelRequire6f25=o);var i=o.register;i("Pvjse",function(e,t){var r,n,i,s=o("d3H5E"),a=o("4GJKx"),u=o("1wc17"),l=o("04RAu"),c=o("b8Rim"),f=o("dcsZi"),h=o("do9pw"),p=o("cxjpp"),d=o("dRLPW"),y=o("ohfOJ"),_=Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]},g=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},b=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&_(t,e,r);return g(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.fileFromPath=t.toFile=t.UnprocessableEntityError=t.PermissionDeniedError=t.InternalServerError=t.AuthenticationError=t.BadRequestError=t.RateLimitError=t.ConflictError=t.NotFoundError=t.APIUserAbortError=t.APIConnectionTimeoutError=t.APIConnectionError=t.APIError=t.OpenAIError=t.OpenAI=void 0;var m=b(o("cGp6U")),w=b(o("5kUHX")),x=b(o("huaPE")),O=b(o("8rxPZ")),P=b(o("2baia")),A=function(e){(0,f._)(r,e);var t=(0,y._)(r);function r(){var e,n,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,a._)(this,r);var u=o.baseURL,l=void 0===u?m.readEnv("OPENAI_BASE_URL"):u,c=o.apiKey,f=void 0===c?m.readEnv("OPENAI_API_KEY"):c,y=o.organization,_=void 0===y?null!==(i=m.readEnv("OPENAI_ORG_ID"))&&void 0!==i?i:null:y,g=(0,d._)(o,["baseURL","apiKey","organization"]);if(void 0===f)throw new x.OpenAIError("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");var b=(0,p._)((0,h._)({apiKey:f,organization:_},g),{baseURL:l||"https://api.openai.com/v1"});if(!b.dangerouslyAllowBrowser&&m.isRunningInBrowser())throw new x.OpenAIError("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew OpenAI({ apiKey, dangerouslyAllowBrowser: true });\n\nhttps://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety\n");return(e=t.call(this,{baseURL:b.baseURL,timeout:null!==(n=b.timeout)&&void 0!==n?n:6e5,httpAgent:b.httpAgent,maxRetries:b.maxRetries,fetch:b.fetch})).completions=new P.Completions((0,s._)(e)),e.chat=new P.Chat((0,s._)(e)),e.embeddings=new P.Embeddings((0,s._)(e)),e.files=new P.Files((0,s._)(e)),e.images=new P.Images((0,s._)(e)),e.audio=new P.Audio((0,s._)(e)),e.moderations=new P.Moderations((0,s._)(e)),e.models=new P.Models((0,s._)(e)),e.fineTuning=new P.FineTuning((0,s._)(e)),e.beta=new P.Beta((0,s._)(e)),e._options=b,e.apiKey=f,e.organization=_,e}return(0,u._)(r,[{key:"defaultQuery",value:function(){return this._options.defaultQuery}},{key:"defaultHeaders",value:function(e){return(0,h._)((0,p._)((0,h._)({},(0,l._)((0,c._)(r.prototype),"defaultHeaders",this).call(this,e)),{"OpenAI-Organization":this.organization}),this._options.defaultHeaders)}},{key:"authHeaders",value:function(e){return{Authorization:"Bearer ".concat(this.apiKey)}}}]),r}(m.APIClient);t.OpenAI=A,n=A,A.OpenAI=n,A.OpenAIError=x.OpenAIError,A.APIError=x.APIError,A.APIConnectionError=x.APIConnectionError,A.APIConnectionTimeoutError=x.APIConnectionTimeoutError,A.APIUserAbortError=x.APIUserAbortError,A.NotFoundError=x.NotFoundError,A.ConflictError=x.ConflictError,A.RateLimitError=x.RateLimitError,A.BadRequestError=x.BadRequestError,A.AuthenticationError=x.AuthenticationError,A.InternalServerError=x.InternalServerError,A.PermissionDeniedError=x.PermissionDeniedError,A.UnprocessableEntityError=x.UnprocessableEntityError,t.OpenAIError=x.OpenAIError,t.APIError=x.APIError,t.APIConnectionError=x.APIConnectionError,t.APIConnectionTimeoutError=x.APIConnectionTimeoutError,t.APIUserAbortError=x.APIUserAbortError,t.NotFoundError=x.NotFoundError,t.ConflictError=x.ConflictError,t.RateLimitError=x.RateLimitError,t.BadRequestError=x.BadRequestError,t.AuthenticationError=x.AuthenticationError,t.InternalServerError=x.InternalServerError,t.PermissionDeniedError=x.PermissionDeniedError,t.UnprocessableEntityError=x.UnprocessableEntityError,t.toFile=O.toFile,t.fileFromPath=O.fileFromPath,(r=A=t.OpenAI||(t.OpenAI={})).toFile=O.toFile,r.fileFromPath=O.fileFromPath,r.Page=w.Page,r.CursorPage=w.CursorPage,r.Completions=P.Completions,r.Chat=P.Chat,r.Embeddings=P.Embeddings,r.Files=P.Files,r.FileObjectsPage=P.FileObjectsPage,r.Images=P.Images,r.Audio=P.Audio,r.Moderations=P.Moderations,r.Models=P.Models,r.ModelsPage=P.ModelsPage,r.FineTuning=P.FineTuning,r.Beta=P.Beta,(t=e.exports=A).default=A}),i("d3H5E",function(t,r){function n(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}e(t.exports,"_assert_this_initialized",function(){return n}),e(t.exports,"_",function(){return n})}),i("4GJKx",function(t,r){e(t.exports,"_",function(){return n});function n(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}}),i("1wc17",function(t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}e(t.exports,"_",function(){return o})}),i("04RAu",function(t,r){e(t.exports,"_",function(){return i});var n=o("9Fj1i");function i(e,t,r){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var o=(0,n._super_prop_base)(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(r||e):i.value}})(e,t,r||e)}}),i("9Fj1i",function(t,r){e(t.exports,"_super_prop_base",function(){return i});var n=o("b8Rim");function i(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=(0,n._get_prototype_of)(e)););return e}}),i("b8Rim",function(t,r){function n(e){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}e(t.exports,"_get_prototype_of",function(){return n}),e(t.exports,"_",function(){return n})}),i("dcsZi",function(t,r){e(t.exports,"_",function(){return i});var n=o("koVwh");function i(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&(0,n._set_prototype_of)(e,t)}}),i("koVwh",function(t,r){e(t.exports,"_set_prototype_of",function(){return n});function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}}),i("do9pw",function(t,r){e(t.exports,"_",function(){return i});var n=o("3sHb8");function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},o=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),o.forEach(function(t){(0,n._define_property)(e,t,r[t])})}return e}}),i("3sHb8",function(t,r){function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}e(t.exports,"_define_property",function(){return n}),e(t.exports,"_",function(){return n})}),i("cxjpp",function(t,r){e(t.exports,"_",function(){return n});function n(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}}),i("dRLPW",function(t,r){e(t.exports,"_",function(){return i});var n=o("8vV5y");function i(e,t){if(null==e)return{};var r,o,i=(0,n._object_without_properties_loose)(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)r=s[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}}),i("8vV5y",function(t,r){e(t.exports,"_object_without_properties_loose",function(){return n});function n(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}}),i("ohfOJ",function(t,r){e(t.exports,"_",function(){return a});var n=o("b8Rim"),i=o("9yjJS"),s=o("3U0IP");function a(e){var t=(0,i._is_native_reflect_construct)();return function(){var r,o=(0,n._get_prototype_of)(e);if(t){var i=(0,n._get_prototype_of)(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return(0,s._possible_constructor_return)(this,r)}}}),i("9yjJS",function(t,r){e(t.exports,"_is_native_reflect_construct",function(){return n});function n(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}}),i("3U0IP",function(t,r){e(t.exports,"_possible_constructor_return",function(){return s});var n=o("d3H5E"),i=o("l0HdX");function s(e,t){return t&&("object"===(0,i._type_of)(t)||"function"==typeof t)?t:(0,n._assert_this_initialized)(e)}}),i("l0HdX",function(t,r){function n(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}e(t.exports,"_type_of",function(){return n}),e(t.exports,"_",function(){return n})}),i("cGp6U",function(e,t){var r,n,i=o("hcCmL"),s=o("kSuI9"),a=o("butdw"),u=o("4GJKx"),l=o("1wc17"),c=o("dcsZi"),f=o("do9pw"),h=o("cxjpp"),p=o("dRLPW"),d=o("cv9Rk"),y=o("c6Xmf"),_=o("l0HdX"),g=o("cfJBl"),b=o("FuVm8"),m=o("ohfOJ"),w=o("l29cN"),x=o("fvlxi").Buffer,O=o("3qWgZ"),P=function(e,t,r,n,o){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!o)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(e,r):o?o.value=r:t.set(e,r),r},A=function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.isObj=e.exports.toBase64=e.exports.getRequiredHeader=e.exports.isHeadersProtocol=e.exports.isRunningInBrowser=e.exports.debug=e.exports.hasOwn=e.exports.isEmptyObj=e.exports.maybeCoerceBoolean=e.exports.maybeCoerceFloat=e.exports.maybeCoerceInteger=e.exports.coerceBoolean=e.exports.coerceFloat=e.exports.coerceInteger=e.exports.readEnv=e.exports.ensurePresent=e.exports.castToError=e.exports.sleep=e.exports.safeJSON=e.exports.isRequestOptions=e.exports.createResponseHeaders=e.exports.PagePromise=e.exports.AbstractPage=e.exports.APIClient=e.exports.APIPromise=e.exports.createForm=e.exports.multipartFormRequestOptions=e.exports.maybeMultipartFormRequestOptions=void 0;var E=o("aTBmQ"),k=o("erIW1"),S=o("huaPE"),R=o("2Q7kV"),j=(o("8rxPZ"),o("8rxPZ"));function I(e){return C.apply(this,arguments)}function C(){return(C=(0,s._)(function(e){var t,r,n,o;return(0,w.__generator)(this,function(i){switch(i.label){case 0:if(t=e.response,e.options.stream){if(X("response",t.status,t.url,t.headers,t.body),e.options.__streamClass)return[2,e.options.__streamClass.fromSSEResponse(t,e.controller)];return[2,k.Stream.fromSSEResponse(t,e.controller)]}if(204===t.status)return[2,null];if(e.options.__binaryResponse)return[2,t];if(!(null==(r=t.headers.get("content-type"))?void 0:r.includes("application/json")))return[3,2];return[4,t.json()];case 1:return n=i.sent(),X("response",t.status,t.url,t.headers,n),[2,n];case 2:return[4,t.text()];case 3:return o=i.sent(),X("response",t.status,t.url,t.headers,o),[2,o]}})})).apply(this,arguments)}Object.defineProperty(e.exports,"maybeMultipartFormRequestOptions",{enumerable:!0,get:function(){return j.maybeMultipartFormRequestOptions}}),Object.defineProperty(e.exports,"multipartFormRequestOptions",{enumerable:!0,get:function(){return j.multipartFormRequestOptions}}),Object.defineProperty(e.exports,"createForm",{enumerable:!0,get:function(){return j.createForm}});var M=function(e){(0,c._)(r,e);var t=(0,m._)(r);function r(e){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I;return(0,u._)(this,r),(n=t.call(this,function(e){e(null)})).responsePromise=e,n.parseResponse=o,n}return(0,l._)(r,[{key:"_thenUnwrap",value:function(e){var t,n=this;return new r(this.responsePromise,(t=(0,s._)(function(t){return(0,w.__generator)(this,function(r){switch(r.label){case 0:return[4,n.parseResponse(t)];case 1:return[2,e.apply(void 0,[r.sent()])]}})}),function(e){return t.apply(this,arguments)}))}},{key:"asResponse",value:function(){return this.responsePromise.then(function(e){return e.response})}},{key:"withResponse",value:function(){var e=this;return(0,s._)(function(){var t;return(0,w.__generator)(this,function(r){switch(r.label){case 0:return[4,Promise.all([e.parse(),e.asResponse()])];case 1:return[2,{data:(t=(0,d._).apply(void 0,[r.sent(),2]))[0],response:t[1]}]}})})()}},{key:"parse",value:function(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}},{key:"then",value:function(e,t){return this.parse().then(e,t)}},{key:"catch",value:function(e){return this.parse().catch(e)}},{key:"finally",value:function(e){return this.parse().finally(e)}}]),r}((0,b._)(Promise));e.exports.APIPromise=M;var F=function(){function t(e){var r=e.baseURL,n=e.maxRetries,o=e.timeout,i=e.httpAgent,s=e.fetch;(0,u._)(this,t),this.baseURL=r,this.maxRetries=G("maxRetries",void 0===n?2:n),this.timeout=G("timeout",void 0===o?6e5:o),this.httpAgent=i,this.fetch=null!=s?s:R.fetch}return(0,l._)(t,[{key:"authHeaders",value:function(e){return{}}},{key:"defaultHeaders",value:function(e){return(0,f._)({Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent()},D(),this.authHeaders(e))}},{key:"validateHeaders",value:function(e,t){}},{key:"defaultIdempotencyKey",value:function(){return"stainless-node-retry-".concat(K())}},{key:"get",value:function(e,t){return this.methodRequest("get",e,t)}},{key:"post",value:function(e,t){return this.methodRequest("post",e,t)}},{key:"patch",value:function(e,t){return this.methodRequest("patch",e,t)}},{key:"put",value:function(e,t){return this.methodRequest("put",e,t)}},{key:"delete",value:function(e,t){return this.methodRequest("delete",e,t)}},{key:"methodRequest",value:function(e,t,r){return this.request(Promise.resolve(r).then(function(r){return(0,f._)({method:e,path:t},r)}))}},{key:"getAPIList",value:function(e,t,r){return this.requestAPIList(t,(0,f._)({method:"get",path:e},r))}},{key:"calculateContentLength",value:function(e){if("string"==typeof e){if(void 0!==x)return x.byteLength(e,"utf8").toString();if("undefined"!=typeof TextEncoder)return new TextEncoder().encode(e).length.toString()}return null}},{key:"buildRequest",value:function(e){var t,r,n,o,i,s,a=e.method,u=e.path,l=e.query,c=e.headers,p=void 0===c?{}:c,d=(0,j.isMultipartBody)(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,y=this.calculateContentLength(d),_=this.buildURL(u,l);"timeout"in e&&G("timeout",e.timeout);var g=null!==(r=e.timeout)&&void 0!==r?r:this.timeout,b=null!==(o=null!==(n=e.httpAgent)&&void 0!==n?n:this.httpAgent)&&void 0!==o?o:(0,R.getDefaultAgent)(_),m=g+1e3;"number"==typeof(null==b?void 0:null===(t=b.options)||void 0===t?void 0:t.timeout)&&m>(null!==(i=b.options.timeout)&&void 0!==i?i:0)&&(b.options.timeout=m),this.idempotencyHeader&&"get"!==a&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),p[this.idempotencyHeader]=e.idempotencyKey);var w=this.buildHeaders({options:e,headers:p,contentLength:y});return{req:(0,h._)((0,f._)((0,h._)((0,f._)({method:a},d&&{body:d}),{headers:w}),b&&{agent:b}),{signal:null!==(s=e.signal)&&void 0!==s?s:null}),url:_,timeout:g}}},{key:"buildHeaders",value:function(e){var t=e.options,r=e.headers,n=e.contentLength,o={};return n&&(o["content-length"]=n),V(o,this.defaultHeaders(t)),V(o,r),(0,j.isMultipartBody)(t.body)&&"node"!==R.kind&&delete o["content-type"],this.validateHeaders(o,r),o}},{key:"prepareOptions",value:function(e){return(0,s._)(function(){return(0,w.__generator)(this,function(e){return[2]})})()}},{key:"prepareRequest",value:function(e,t){return t.url,t.options,(0,s._)(function(){return(0,w.__generator)(this,function(e){return[2]})})()}},{key:"parseHeaders",value:function(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(function(e){return(0,y._)(e)})):(0,f._)({},e):{}}},{key:"makeStatusError",value:function(e,t,r,n){return S.APIError.generate(e,t,r,n)}},{key:"request",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new M(this.makeRequest(e,t))}},{key:"makeRequest",value:function(t,r){var n=this;return(0,s._)(function(){var o,i,s,a,u,l,c,f,h,p,d,y,_,g,b,m;return(0,w.__generator)(this,function(w){switch(w.label){case 0:return[4,t];case 1:return i=w.sent(),null==r&&(r=null!==(s=i.maxRetries)&&void 0!==s?s:n.maxRetries),[4,n.prepareOptions(i)];case 2:return w.sent(),u=(a=n.buildRequest(i)).req,l=a.url,c=a.timeout,[4,n.prepareRequest(u,{url:l,options:i})];case 3:if(w.sent(),X("request",l,i,u.headers),null===(o=i.signal)||void 0===o?void 0:o.aborted)throw new S.APIUserAbortError;return f=new AbortController,[4,n.fetchWithTimeout(l,u,c,f).catch(e.exports.castToError)];case 4:if((h=w.sent())instanceof Error){if(null===(p=i.signal)||void 0===p?void 0:p.aborted)throw new S.APIUserAbortError;if(r)return[2,n.retryRequest(i,r)];if("AbortError"===h.name)throw new S.APIConnectionTimeoutError;throw new S.APIConnectionError({cause:h})}if(d=(0,e.exports.createResponseHeaders)(h.headers),h.ok)return[3,6];if(r&&n.shouldRetry(h))return y="retrying, ".concat(r," attempts remaining"),X("response (error; ".concat(y,")"),h.status,l,d),[2,n.retryRequest(i,r,d)];return[4,h.text().catch(function(t){return(0,e.exports.castToError)(t).message})];case 5:throw _=w.sent(),b=(g=(0,e.exports.safeJSON)(_))?void 0:_,m=r?"(error; no more retries left)":"(error; not retryable)",X("response (error; ".concat(m,")"),h.status,l,d,b),n.makeStatusError(h.status,g,b,d);case 6:return[2,{response:h,options:i,controller:f}]}})})()}},{key:"requestAPIList",value:function(e,t){return new B(this,this.makeRequest(t,null),e)}},{key:"buildURL",value:function(e,t){var r=new URL(q(e)?e:this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),n=this.defaultQuery();return H(n)||(t=(0,f._)({},n,t)),"object"==typeof t&&t&&!Array.isArray(t)&&(r.search=this.stringifyQuery(t)),r.toString()}},{key:"stringifyQuery",value:function(e){return Object.entries(e).filter(function(e){var t=(0,d._)(e,2);return void 0!==(t[0],t[1])}).map(function(e){var t=(0,d._)(e,2),r=t[0],n=t[1];if("string"==typeof n||"number"==typeof n||"boolean"==typeof n)return"".concat(encodeURIComponent(r),"=").concat(encodeURIComponent(n));if(null===n)return"".concat(encodeURIComponent(r),"=");throw new S.OpenAIError("Cannot stringify type ".concat(void 0===n?"undefined":(0,_._)(n),"; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case."))}).join("&")}},{key:"fetchWithTimeout",value:function(e,t,r,n){var o=this;return(0,s._)(function(){var i,s,a,u;return(0,w.__generator)(this,function(l){return s=(i=t||{}).signal,a=(0,p._)(i,["signal"]),s&&s.addEventListener("abort",function(){return n.abort()}),u=setTimeout(function(){return n.abort()},r),[2,o.getRequestClient().fetch.call(void 0,e,(0,f._)({signal:n.signal},a)).finally(function(){clearTimeout(u)})]})})()}},{key:"getRequestClient",value:function(){return{fetch:this.fetch}}},{key:"shouldRetry",value:function(e){var t=e.headers.get("x-should-retry");return"true"===t||"false"!==t&&(408===e.status||409===e.status||429===e.status||e.status>=500)}},{key:"retryRequest",value:function(t,r,n){var o=this;return(0,s._)(function(){var i,s,a,u,l,c,f;return(0,w.__generator)(this,function(h){switch(h.label){case 0:return(s=null==n?void 0:n["retry-after-ms"])&&!Number.isNaN(a=parseFloat(s))&&(i=a),(u=null==n?void 0:n["retry-after"])&&!i&&(i=Number.isNaN(l=parseFloat(u))?Date.parse(u)-Date.now():1e3*l),i&&0<=i&&i<6e4||(f=null!==(c=t.maxRetries)&&void 0!==c?c:o.maxRetries,i=o.calculateDefaultRetryTimeoutMillis(r,f)),[4,(0,e.exports.sleep)(i)];case 1:return h.sent(),[2,o.makeRequest(t,r-1)]}})})()}},{key:"calculateDefaultRetryTimeoutMillis",value:function(e,t){return Math.min(.5*Math.pow(2,t-e),8)*(1-.25*Math.random())*1e3}},{key:"getUserAgent",value:function(){return"".concat(this.constructor.name,"/JS ").concat(E.VERSION)}}]),t}();e.exports.APIClient=F;var T=function(){function e(t,n,o,i){(0,u._)(this,e),r.set(this,void 0),P(this,r,t,"f"),this.options=i,this.response=n,this.body=o}return(0,l._)(e,[{key:"hasNextPage",value:function(){return!!this.getPaginatedItems().length&&null!=this.nextPageInfo()}},{key:"getNextPage",value:function(){var e=this;return(0,s._)(function(){var t,n,o,i,s,a,u,l,c,h,p;return(0,w.__generator)(this,function(_){switch(_.label){case 0:if(!(t=e.nextPageInfo()))throw new S.OpenAIError("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");if(n=(0,f._)({},e.options),"params"in t&&"object"==typeof n.query)n.query=(0,f._)({},n.query,t.params);else if("url"in t){o=(0,y._)(Object.entries(n.query||{})).concat((0,y._)(t.url.searchParams.entries())),i=!0,s=!1,a=void 0;try{for(u=o[Symbol.iterator]();!(i=(l=u.next()).done);i=!0)h=(c=(0,d._)(l.value,2))[0],p=c[1],t.url.searchParams.set(h,p)}catch(e){s=!0,a=e}finally{try{i||null==u.return||u.return()}finally{if(s)throw a}}n.query=void 0,n.path=t.url.toString()}return[4,A(e,r,"f").requestAPIList(e.constructor,n)];case 1:return[2,_.sent()]}})})()}},{key:"iterPages",value:function(){var e=this;return(0,g._)(function(){var t;return(0,w.__generator)(this,function(r){switch(r.label){case 0:return[4,t=e];case 1:r.sent(),r.label=2;case 2:if(!t.hasNextPage())return[3,5];return[4,(0,a._)(t.getNextPage())];case 3:return[4,t=r.sent()];case 4:return r.sent(),[3,2];case 5:return[2]}})})()}},{key:(r=new WeakMap,Symbol.asyncIterator),value:function(){var e=this;return(0,g._)(function(){var t,r,n,o,s,u,l,c,f,h,p,d,y;return(0,w.__generator)(this,function(_){switch(_.label){case 0:t=!1,r=!1,_.label=1;case 1:_.trys.push([1,13,14,19]),o=(0,i._)(e.iterPages()),_.label=2;case 2:return[4,(0,a._)(o.next())];case 3:if(!(t=!(s=_.sent()).done))return[3,12];u=s.value,l=!0,c=!1,f=void 0,_.label=4;case 4:_.trys.push([4,9,10,11]),h=u.getPaginatedItems()[Symbol.iterator](),_.label=5;case 5:if(l=(p=h.next()).done)return[3,8];return[4,p.value];case 6:_.sent(),_.label=7;case 7:return l=!0,[3,5];case 8:return[3,11];case 9:return d=_.sent(),c=!0,f=d,[3,11];case 10:try{l||null==h.return||h.return()}finally{if(c)throw f}return[7];case 11:return t=!1,[3,2];case 12:return[3,19];case 13:return y=_.sent(),r=!0,n=y,[3,19];case 14:if(_.trys.push([14,,17,18]),!(t&&null!=o.return))return[3,16];return[4,o.return()];case 15:_.sent(),_.label=16;case 16:return[3,18];case 17:if(r)throw n;return[7];case 18:return[7];case 19:return[2]}})})()}}]),e}();e.exports.AbstractPage=T;var B=function(e){(0,c._)(r,e);var t=(0,m._)(r);function r(e,n,o){var i;return(0,u._)(this,r),t.call(this,n,(i=(0,s._)(function(t){var r,n;return(0,w.__generator)(this,function(i){switch(i.label){case 0:return r=o.bind,n=[void 0,e,t.response],[4,I(t)];case 1:return[2,new(r.apply(o,n.concat([i.sent(),t.options])))]}})}),function(e){return i.apply(this,arguments)}))}return(0,l._)(r,[{key:Symbol.asyncIterator,value:function(){var e=this;return(0,g._)(function(){var t,r,n,o,s,u,l;return(0,w.__generator)(this,function(c){switch(c.label){case 0:return[4,(0,a._)(e)];case 1:t=c.sent(),r=!1,n=!1,c.label=2;case 2:c.trys.push([2,8,9,14]),s=(0,i._)(t),c.label=3;case 3:return[4,(0,a._)(s.next())];case 4:if(!(r=!(u=c.sent()).done))return[3,7];return[4,u.value];case 5:c.sent(),c.label=6;case 6:return r=!1,[3,3];case 7:return[3,14];case 8:return l=c.sent(),n=!0,o=l,[3,14];case 9:if(c.trys.push([9,,12,13]),!(r&&null!=s.return))return[3,11];return[4,s.return()];case 10:c.sent(),c.label=11;case 11:return[3,13];case 12:if(n)throw o;return[7];case 13:return[7];case 14:return[2]}})})()}}]),r}(M);e.exports.PagePromise=B,e.exports.createResponseHeaders=function(e){return new Proxy(Object.fromEntries(e.entries()),{get:function(e,t){var r=t.toString();return e[r.toLowerCase()]||e[r]}})};var U={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__binaryResponse:!0,__streamClass:!0};e.exports.isRequestOptions=function(e){return"object"==typeof e&&null!==e&&!H(e)&&Object.keys(e).every(function(e){return z(U,e)})};var L=function(){if("undefined"!=typeof Deno&&null!=Deno.build)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":E.VERSION,"X-Stainless-OS":W(Deno.build.os),"X-Stainless-Arch":N(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":Deno.version};if("undefined"!=typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":E.VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"other:".concat(EdgeRuntime),"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":O.version};if("[object process]"===Object.prototype.toString.call(void 0!==O?O:0))return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":E.VERSION,"X-Stainless-OS":W(O.platform),"X-Stainless-Arch":N(O.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":O.version};var e=function(){if("undefined"==typeof navigator||!navigator)return null;var e=!0,t=!1,r=void 0;try{for(var n,o=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}][Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var i=n.value,s=i.key,a=i.pattern.exec(navigator.userAgent);if(a){var u=a[1]||0,l=a[2]||0,c=a[3]||0;return{browser:s,version:"".concat(u,".").concat(l,".").concat(c)}}}}catch(e){t=!0,r=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw r}}return null}();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":E.VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"browser:".concat(e.browser),"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":E.VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}},N=function(e){return"x32"===e?"x32":"x86_64"===e||"x64"===e?"x64":"arm"===e?"arm":"aarch64"===e||"arm64"===e?"arm64":e?"other:".concat(e):"unknown"},W=function(e){return(e=e.toLowerCase()).includes("ios")?"iOS":"android"===e?"Android":"darwin"===e?"MacOS":"win32"===e?"Windows":"freebsd"===e?"FreeBSD":"openbsd"===e?"OpenBSD":"linux"===e?"Linux":e?"Other:".concat(e):"Unknown"},D=function(){return null!=n?n:n=L()};e.exports.safeJSON=function(e){try{return JSON.parse(e)}catch(e){return}};var J=RegExp("^(?:[a-z]+:)?//","i"),q=function(e){return J.test(e)};e.exports.sleep=function(e){return new Promise(function(t){return setTimeout(t,e)})};var G=function(e,t){if("number"!=typeof t||!Number.isInteger(t))throw new S.OpenAIError("".concat(e," must be an integer"));if(t<0)throw new S.OpenAIError("".concat(e," must be a positive integer"));return t};function H(e){if(!e)return!0;for(var t in e)return!1;return!0}function z(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function V(e,t){for(var r in t)if(z(t,r)){var n=r.toLowerCase();if(n){var o=t[r];null===o?delete e[n]:void 0!==o&&(e[n]=o)}}}function X(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];void 0===O||(0,_._)(O)}e.exports.castToError=function(e){return e instanceof Error?e:Error(e)},e.exports.ensurePresent=function(e){if(null==e)throw new S.OpenAIError("Expected a value to be given but received ".concat(e," instead."));return e},e.exports.readEnv=function(e){var t,r,n,o,i,s;return void 0!==O?null!==(s=null===(r=O.env)||void 0===r?void 0:null===(t=r[e])||void 0===t?void 0:t.trim())&&void 0!==s?s:void 0:"undefined"!=typeof Deno?null===(i=Deno.env)||void 0===i?void 0:null===(o=i.get)||void 0===o?void 0:null===(n=o.call(i,e))||void 0===n?void 0:n.trim():void 0},e.exports.coerceInteger=function(e){if("number"==typeof e)return Math.round(e);if("string"==typeof e)return parseInt(e,10);throw new S.OpenAIError("Could not coerce ".concat(e," (type: ").concat(void 0===e?"undefined":(0,_._)(e),") into a number"))},e.exports.coerceFloat=function(e){if("number"==typeof e)return e;if("string"==typeof e)return parseFloat(e);throw new S.OpenAIError("Could not coerce ".concat(e," (type: ").concat(void 0===e?"undefined":(0,_._)(e),") into a number"))},e.exports.coerceBoolean=function(e){return"boolean"==typeof e?e:"string"==typeof e?"true"===e:!!e},e.exports.maybeCoerceInteger=function(t){if(void 0!==t)return(0,e.exports.coerceInteger)(t)},e.exports.maybeCoerceFloat=function(t){if(void 0!==t)return(0,e.exports.coerceFloat)(t)},e.exports.maybeCoerceBoolean=function(t){if(void 0!==t)return(0,e.exports.coerceBoolean)(t)},e.exports.isEmptyObj=H,e.exports.hasOwn=z,e.exports.debug=X;var K=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})};e.exports.isRunningInBrowser=function(){return"undefined"!=typeof window&&void 0!==window.document&&"undefined"!=typeof navigator},e.exports.isHeadersProtocol=function(e){return"function"==typeof(null==e?void 0:e.get)},e.exports.getRequiredHeader=function(t,r){var n=r.toLowerCase();if((0,e.exports.isHeadersProtocol)(t))for(var o,i=(null===(o=r[0])||void 0===o?void 0:o.toUpperCase())+r.substring(1).replace(/([^\w])(\w)/g,function(e,t,r){return t+r.toUpperCase()}),s=0,a=[r,n,r.toUpperCase(),i];s<a.length;s++){var u=a[s],l=t.get(u);if(l)return l}var c=!0,f=!1,h=void 0;try{for(var p,y=Object.entries(t)[Symbol.iterator]();!(c=(p=y.next()).done);c=!0){var _=(0,d._)(p.value,2),g=_[0],b=_[1];if(g.toLowerCase()===n){if(Array.isArray(b)){if(b.length<=1)return b[0];return console.warn("Received ".concat(b.length," entries for the ").concat(r," header, using the first entry.")),b[0]}return b}}}catch(e){f=!0,h=e}finally{try{c||null==y.return||y.return()}finally{if(f)throw h}}throw Error("Could not find ".concat(r," header"))},e.exports.toBase64=function(e){if(!e)return"";if(void 0!==x)return x.from(e).toString("base64");if("undefined"!=typeof btoa)return btoa(e);throw new S.OpenAIError("Cannot generate b64 string; Expected `Buffer` or `btoa` to be defined")},e.exports.isObj=function(e){return null!=e&&"object"==typeof e&&!Array.isArray(e)}}),i("hcCmL",function(t,r){function n(e){var t,r,n,i=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);i--;){if(r&&null!=(t=e[r]))return t.call(e);if(n&&null!=(t=e[n]))return new o(t.call(e));r="@@asyncIterator",n="@@iterator"}throw TypeError("Object is not async iterable")}function o(e){function t(e){if(Object(e)!==e)return Promise.reject(TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return(o=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var r=this.s.return;return void 0===r?Promise.resolve({value:e,done:!0}):t(r.apply(this.s,arguments))},throw:function(e){var r=this.s.return;return void 0===r?Promise.reject(e):t(r.apply(this.s,arguments))}},new o(e)}e(t.exports,"_",function(){return n})}),i("kSuI9",function(t,r){function n(e,t,r,n,o,i,s){try{var a=e[i](s),u=a.value}catch(e){r(e);return}a.done?t(u):Promise.resolve(u).then(n,o)}function o(e){return function(){var t=this,r=arguments;return new Promise(function(o,i){var s=e.apply(t,r);function a(e){n(s,o,i,a,u,"next",e)}function u(e){n(s,o,i,a,u,"throw",e)}a(void 0)})}}e(t.exports,"_",function(){return o})}),i("butdw",function(t,r){e(t.exports,"_",function(){return i});var n=o("hwrJ8");function i(e){return new n._await_value(e)}}),i("hwrJ8",function(t,r){e(t.exports,"_await_value",function(){return n});function n(e){this.wrapped=e}}),i("cv9Rk",function(t,r){e(t.exports,"_",function(){return u});var n=o("hrk7H"),i=o("fBJYg"),s=o("e8oCh"),a=o("1hjNY");function u(e,t){return(0,n._array_with_holes)(e)||(0,i._iterable_to_array_limit)(e,t)||(0,a._unsupported_iterable_to_array)(e,t)||(0,s._non_iterable_rest)()}}),i("hrk7H",function(t,r){e(t.exports,"_array_with_holes",function(){return n});function n(e){if(Array.isArray(e))return e}}),i("fBJYg",function(t,r){e(t.exports,"_iterable_to_array_limit",function(){return n});function n(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],s=!0,a=!1;try{for(o=o.call(e);!(s=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);s=!0);}catch(e){a=!0,n=e}finally{try{s||null==o.return||o.return()}finally{if(a)throw n}}return i}}}),i("e8oCh",function(t,r){e(t.exports,"_non_iterable_rest",function(){return n});function n(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}}),i("1hjNY",function(t,r){e(t.exports,"_unsupported_iterable_to_array",function(){return i});var n=o("QCMVH");function i(e,t){if(e){if("string"==typeof e)return(0,n._array_like_to_array)(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return(0,n._array_like_to_array)(e,t)}}}),i("QCMVH",function(t,r){e(t.exports,"_array_like_to_array",function(){return n});function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}}),i("c6Xmf",function(t,r){e(t.exports,"_",function(){return u});var n=o("2BACi"),i=o("djrl5"),s=o("jix3C"),a=o("1hjNY");function u(e){return(0,n._array_without_holes)(e)||(0,i._iterable_to_array)(e)||(0,a._unsupported_iterable_to_array)(e)||(0,s._non_iterable_spread)()}}),i("2BACi",function(t,r){e(t.exports,"_array_without_holes",function(){return i});var n=o("QCMVH");function i(e){if(Array.isArray(e))return(0,n._array_like_to_array)(e)}}),i("djrl5",function(t,r){e(t.exports,"_iterable_to_array",function(){return n});function n(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}}),i("jix3C",function(t,r){e(t.exports,"_non_iterable_spread",function(){return n});function n(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}}),i("cfJBl",function(t,r){e(t.exports,"_",function(){return i});var n=o("iXgdx");function i(e){return function(){return new n._async_generator(e.apply(this,arguments))}}}),i("iXgdx",function(t,r){e(t.exports,"_async_generator",function(){return i});var n=o("hwrJ8");function i(e){var t,r;function o(t,r){try{var s=e[t](r),a=s.value,u=a instanceof n._await_value;Promise.resolve(u?a.wrapped:a).then(function(e){if(u){o("next",e);return}i(s.done?"return":"normal",e)},function(e){o("throw",e)})}catch(e){i("throw",e)}}function i(e,n){switch(e){case"return":t.resolve({value:n,done:!0});break;case"throw":t.reject(n);break;default:t.resolve({value:n,done:!1})}(t=t.next)?o(t.key,t.arg):r=null}this._invoke=function(e,n){return new Promise(function(i,s){var a={key:e,arg:n,resolve:i,reject:s,next:null};r?r=r.next=a:(t=r=a,o(e,n))})},"function"!=typeof e.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(i.prototype[Symbol.asyncIterator]=function(){return this}),i.prototype.next=function(e){return this._invoke("next",e)},i.prototype.throw=function(e){return this._invoke("throw",e)},i.prototype.return=function(e){return this._invoke("return",e)}}),i("FuVm8",function(t,r){e(t.exports,"_",function(){return u});var n=o("5Gbgo"),i=o("b8Rim"),s=o("19aQU"),a=o("koVwh");function u(e){var t="function"==typeof Map?new Map:void 0;return(u=function(e){if(null===e||!(0,s._is_native_function)(e))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return(0,n._construct)(e,arguments,(0,i._get_prototype_of)(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),(0,a._set_prototype_of)(r,e)})(e)}}),i("5Gbgo",function(t,r){e(t.exports,"_construct",function(){return s});var n=o("9yjJS"),i=o("koVwh");function s(e,t,r){return(s=(0,n._is_native_reflect_construct)()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&(0,i._set_prototype_of)(o,r.prototype),o}).apply(null,arguments)}}),i("19aQU",function(t,r){e(t.exports,"_is_native_function",function(){return n});function n(e){return -1!==Function.toString.call(e).indexOf("[native code]")}}),i("l29cN",function(t,r){function n(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(u){return function(a){if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}e(t.exports,"__generator",function(){return n}),o("l0HdX"),"function"==typeof SuppressedError&&SuppressedError}),i("fvlxi",function(t,r){e(t.exports,"Buffer",function(){return n},function(e){return n=e}),e(t.exports,"INSPECT_MAX_BYTES",function(){return i},function(e){return i=e});/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var n,i,s=o("d3H5E"),a=o("4GJKx"),u=o("1wc17"),l=o("dcsZi"),c=o("l0HdX"),f=o("ohfOJ"),h=o("hilwa"),p=o("5WO87"),d="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function y(e){if(e>2147483647)throw RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,_.prototype),t}function _(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return m(e)}return g(e,t,r)}function g(e,t,r){if("string"==typeof e)return function(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!_.isEncoding(t))throw TypeError("Unknown encoding: "+t);var r=0|P(e,t),n=y(r),o=n.write(e,t);return o!==r&&(n=n.slice(0,o)),n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(V(e,Uint8Array)){var t=new Uint8Array(e);return x(t.buffer,t.byteOffset,t.byteLength)}return w(e)}(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+(void 0===e?"undefined":(0,c._)(e)));if(V(e,ArrayBuffer)||e&&V(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(V(e,SharedArrayBuffer)||e&&V(e.buffer,SharedArrayBuffer)))return x(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return _.from(n,t,r);var o=function(e){if(_.isBuffer(e)){var t,r=0|O(e.length),n=y(r);return 0===n.length||e.copy(n,0,0,r),n}return void 0!==e.length?"number"!=typeof e.length||(t=e.length)!=t?y(0):w(e):"Buffer"===e.type&&Array.isArray(e.data)?w(e.data):void 0}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return _.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+(void 0===e?"undefined":(0,c._)(e)))}function b(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function m(e){return b(e),y(e<0?0:0|O(e))}function w(e){for(var t=e.length<0?0:0|O(e.length),r=y(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function x(e,t,r){var n;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),_.prototype),n}function O(e){if(e>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function P(e,t){if(_.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||V(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+(void 0===e?"undefined":(0,c._)(e)));var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return G(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return H(e).length;default:if(o)return n?-1:G(e).length;t=(""+t).toLowerCase(),o=!0}}function A(e,t,r){var n,o,i=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var o="",i=t;i<r;++i)o+=X[e[i]];return o}(this,t,r);case"utf8":case"utf-8":return R(this,t,r);case"ascii":return function(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}(this,t,r);case"latin1":case"binary":return function(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}(this,t,r);case"base64":return n=t,o=r,0===n&&o===this.length?h.fromByteArray(this):h.fromByteArray(this.slice(n,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){for(var n=e.slice(t,r),o="",i=0;i<n.length-1;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}(this,t,r);default:if(i)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function E(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function k(e,t,r,n,o){var i;if(0===e.length)return -1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),(i=r=+r)!=i&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return -1;r=e.length-1}else if(r<0){if(!o)return -1;r=0}if("string"==typeof t&&(t=_.from(t,n)),_.isBuffer(t))return 0===t.length?-1:S(e,t,r,n,o);if("number"==typeof t)return(t&=255,"function"==typeof Uint8Array.prototype.indexOf)?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):S(e,[t],r,n,o);throw TypeError("val must be string, number or Buffer")}function S(e,t,r,n,o){var i,s=1,a=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return -1;s=2,a/=2,u/=2,r/=2}function l(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(o){var c=-1;for(i=r;i<a;i++)if(l(e,i)===l(t,-1===c?0:i-c)){if(-1===c&&(c=i),i-c+1===u)return c*s}else -1!==c&&(i-=i-c),c=-1}else for(r+u>a&&(r=a-u),i=r;i>=0;i--){for(var f=!0,h=0;h<u;h++)if(l(e,i+h)!==l(t,h)){f=!1;break}if(f)return i}return -1}function R(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var i=e[o],s=null,a=i>239?4:i>223?3:i>191?2:1;if(o+a<=r){var u=void 0,l=void 0,c=void 0,f=void 0;switch(a){case 1:i<128&&(s=i);break;case 2:(192&(u=e[o+1]))==128&&(f=(31&i)<<6|63&u)>127&&(s=f);break;case 3:u=e[o+1],l=e[o+2],(192&u)==128&&(192&l)==128&&(f=(15&i)<<12|(63&u)<<6|63&l)>2047&&(f<55296||f>57343)&&(s=f);break;case 4:u=e[o+1],l=e[o+2],c=e[o+3],(192&u)==128&&(192&l)==128&&(192&c)==128&&(f=(15&i)<<18|(63&u)<<12|(63&l)<<6|63&c)>65535&&f<1114112&&(s=f)}}null===s?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),o+=a}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}(n)}function j(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function I(e,t,r,n,o,i){if(!_.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw RangeError('"value" argument is out of bounds');if(r+n>e.length)throw RangeError("Index out of range")}function C(e,t,r,n,o){W(t,n,o,e,r,7);var i=Number(t&BigInt(4294967295));e[r++]=i,i>>=8,e[r++]=i,i>>=8,e[r++]=i,i>>=8,e[r++]=i;var s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,r}function M(e,t,r,n,o){W(t,n,o,e,r,7);var i=Number(t&BigInt(4294967295));e[r+7]=i,i>>=8,e[r+6]=i,i>>=8,e[r+5]=i,i>>=8,e[r+4]=i;var s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=s,s>>=8,e[r+2]=s,s>>=8,e[r+1]=s,s>>=8,e[r]=s,r+8}function F(e,t,r,n,o,i){if(r+n>e.length||r<0)throw RangeError("Index out of range")}function T(e,t,r,n,o){return t=+t,r>>>=0,o||F(e,t,r,4,34028234663852886e22,-34028234663852886e22),p.write(e,t,r,n,23,4),r+4}function B(e,t,r,n,o){return t=+t,r>>>=0,o||F(e,t,r,8,17976931348623157e292,-17976931348623157e292),p.write(e,t,r,n,52,8),r+8}n=_,i=50,_.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),_.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(_.prototype,"parent",{enumerable:!0,get:function(){if(_.isBuffer(this))return this.buffer}}),Object.defineProperty(_.prototype,"offset",{enumerable:!0,get:function(){if(_.isBuffer(this))return this.byteOffset}}),_.poolSize=8192,_.from=function(e,t,r){return g(e,t,r)},Object.setPrototypeOf(_.prototype,Uint8Array.prototype),Object.setPrototypeOf(_,Uint8Array),_.alloc=function(e,t,r){return(b(e),e<=0)?y(e):void 0!==t?"string"==typeof r?y(e).fill(t,r):y(e).fill(t):y(e)},_.allocUnsafe=function(e){return m(e)},_.allocUnsafeSlow=function(e){return m(e)},_.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==_.prototype},_.compare=function(e,t){if(V(e,Uint8Array)&&(e=_.from(e,e.offset,e.byteLength)),V(t,Uint8Array)&&(t=_.from(t,t.offset,t.byteLength)),!_.isBuffer(e)||!_.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,o=0,i=Math.min(r,n);o<i;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},_.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},_.concat=function(e,t){if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return _.alloc(0);if(void 0===t)for(r=0,t=0;r<e.length;++r)t+=e[r].length;var r,n=_.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){var i=e[r];if(V(i,Uint8Array))o+i.length>n.length?(_.isBuffer(i)||(i=_.from(i)),i.copy(n,o)):Uint8Array.prototype.set.call(n,i,o);else if(_.isBuffer(i))i.copy(n,o);else throw TypeError('"list" argument must be an Array of Buffers');o+=i.length}return n},_.byteLength=P,_.prototype._isBuffer=!0,_.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)E(this,t,t+1);return this},_.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)E(this,t,t+3),E(this,t+1,t+2);return this},_.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)E(this,t,t+7),E(this,t+1,t+6),E(this,t+2,t+5),E(this,t+3,t+4);return this},_.prototype.toString=function(){var e=this.length;return 0===e?"":0==arguments.length?R(this,0,e):A.apply(this,arguments)},_.prototype.toLocaleString=_.prototype.toString,_.prototype.equals=function(e){if(!_.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===_.compare(this,e)},_.prototype.inspect=function(){var e="",t=i;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},d&&(_.prototype[d]=_.prototype.inspect),_.prototype.compare=function(e,t,r,n,o){if(V(e,Uint8Array)&&(e=_.from(e,e.offset,e.byteLength)),!_.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+(void 0===e?"undefined":(0,c._)(e)));if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,o>>>=0,this===e)return 0;for(var i=o-n,s=r-t,a=Math.min(i,s),u=this.slice(n,o),l=e.slice(t,r),f=0;f<a;++f)if(u[f]!==l[f]){i=u[f],s=l[f];break}return i<s?-1:s<i?1:0},_.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},_.prototype.indexOf=function(e,t,r){return k(this,e,t,r,!0)},_.prototype.lastIndexOf=function(e,t,r){return k(this,e,t,r,!1)},_.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var o,i,s,a,u,l,c,f,h=this.length-t;if((void 0===r||r>h)&&(r=h),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var p=!1;;)switch(n){case"hex":return function(e,t,r,n){r=Number(r)||0;var o,i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var s=t.length;for(n>s/2&&(n=s/2),o=0;o<n;++o){var a=parseInt(t.substr(2*o,2),16);if(a!=a)break;e[r+o]=a}return o}(this,e,t,r);case"utf8":case"utf-8":return o=t,i=r,z(G(e,this.length-o),this,o,i);case"ascii":case"latin1":case"binary":return s=t,a=r,z(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(e),this,s,a);case"base64":return u=t,l=r,z(H(e),this,u,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c=t,f=r,z(function(e,t){for(var r,n,o=[],i=0;i<e.length&&!((t-=2)<0);++i)n=(r=e.charCodeAt(i))>>8,o.push(r%256),o.push(n);return o}(e,this.length-c),this,c,f);default:if(p)throw TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),p=!0}},_.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},_.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,_.prototype),n},_.prototype.readUintLE=_.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||j(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n},_.prototype.readUintBE=_.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||j(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n},_.prototype.readUint8=_.prototype.readUInt8=function(e,t){return e>>>=0,t||j(e,1,this.length),this[e]},_.prototype.readUint16LE=_.prototype.readUInt16LE=function(e,t){return e>>>=0,t||j(e,2,this.length),this[e]|this[e+1]<<8},_.prototype.readUint16BE=_.prototype.readUInt16BE=function(e,t){return e>>>=0,t||j(e,2,this.length),this[e]<<8|this[e+1]},_.prototype.readUint32LE=_.prototype.readUInt32LE=function(e,t){return e>>>=0,t||j(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},_.prototype.readUint32BE=_.prototype.readUInt32BE=function(e,t){return e>>>=0,t||j(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},_.prototype.readBigUInt64LE=K(function(e){D(e>>>=0,"offset");var t=this[e],r=this[e+7];(void 0===t||void 0===r)&&J(e,this.length-8);var n=t+256*this[++e]+65536*this[++e]+16777216*this[++e],o=this[++e]+256*this[++e]+65536*this[++e]+16777216*r;return BigInt(n)+(BigInt(o)<<BigInt(32))}),_.prototype.readBigUInt64BE=K(function(e){D(e>>>=0,"offset");var t=this[e],r=this[e+7];(void 0===t||void 0===r)&&J(e,this.length-8);var n=16777216*t+65536*this[++e]+256*this[++e]+this[++e],o=16777216*this[++e]+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(o)}),_.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||j(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*t)),n},_.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||j(e,t,this.length);for(var n=t,o=1,i=this[e+--n];n>0&&(o*=256);)i+=this[e+--n]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},_.prototype.readInt8=function(e,t){return(e>>>=0,t||j(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},_.prototype.readInt16LE=function(e,t){e>>>=0,t||j(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},_.prototype.readInt16BE=function(e,t){e>>>=0,t||j(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},_.prototype.readInt32LE=function(e,t){return e>>>=0,t||j(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},_.prototype.readInt32BE=function(e,t){return e>>>=0,t||j(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},_.prototype.readBigInt64LE=K(function(e){D(e>>>=0,"offset");var t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&J(e,this.length-8),(BigInt(this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24))<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+16777216*this[++e])}),_.prototype.readBigInt64BE=K(function(e){D(e>>>=0,"offset");var t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&J(e,this.length-8),(BigInt((t<<24)+65536*this[++e]+256*this[++e]+this[++e])<<BigInt(32))+BigInt(16777216*this[++e]+65536*this[++e]+256*this[++e]+r)}),_.prototype.readFloatLE=function(e,t){return e>>>=0,t||j(e,4,this.length),p.read(this,e,!0,23,4)},_.prototype.readFloatBE=function(e,t){return e>>>=0,t||j(e,4,this.length),p.read(this,e,!1,23,4)},_.prototype.readDoubleLE=function(e,t){return e>>>=0,t||j(e,8,this.length),p.read(this,e,!0,52,8)},_.prototype.readDoubleBE=function(e,t){return e>>>=0,t||j(e,8,this.length),p.read(this,e,!1,52,8)},_.prototype.writeUintLE=_.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){var o=Math.pow(2,8*r)-1;I(this,e,t,r,o,0)}var i=1,s=0;for(this[t]=255&e;++s<r&&(i*=256);)this[t+s]=e/i&255;return t+r},_.prototype.writeUintBE=_.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){var o=Math.pow(2,8*r)-1;I(this,e,t,r,o,0)}var i=r-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+r},_.prototype.writeUint8=_.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,1,255,0),this[t]=255&e,t+1},_.prototype.writeUint16LE=_.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},_.prototype.writeUint16BE=_.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},_.prototype.writeUint32LE=_.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},_.prototype.writeUint32BE=_.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},_.prototype.writeBigUInt64LE=K(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return C(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),_.prototype.writeBigUInt64BE=K(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return M(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),_.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var o=Math.pow(2,8*r-1);I(this,e,t,r,o-1,-o)}var i=0,s=1,a=0;for(this[t]=255&e;++i<r&&(s*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+r},_.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var o=Math.pow(2,8*r-1);I(this,e,t,r,o-1,-o)}var i=r-1,s=1,a=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+r},_.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},_.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},_.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},_.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},_.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},_.prototype.writeBigInt64LE=K(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return C(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),_.prototype.writeBigInt64BE=K(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return M(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),_.prototype.writeFloatLE=function(e,t,r){return T(this,e,t,!0,r)},_.prototype.writeFloatBE=function(e,t,r){return T(this,e,t,!1,r)},_.prototype.writeDoubleLE=function(e,t,r){return B(this,e,t,!0,r)},_.prototype.writeDoubleBE=function(e,t,r){return B(this,e,t,!1,r)},_.prototype.copy=function(e,t,r,n){if(!_.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(n<0)throw RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var o=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),o},_.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw TypeError("encoding must be a string");if("string"==typeof n&&!_.isEncoding(n))throw TypeError("Unknown encoding: "+n);if(1===e.length){var o,i=e.charCodeAt(0);("utf8"===n&&i<128||"latin1"===n)&&(e=i)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{var s=_.isBuffer(e)?e:_.from(e,n),a=s.length;if(0===a)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<r-t;++o)this[o+t]=s[o%a]}return this};var U={};function L(e,t,r){U[e]=function(r){(0,l._)(o,r);var n=(0,f._)(o);function o(){var r;return(0,a._)(this,o),r=n.call(this),Object.defineProperty((0,s._)(r),"message",{value:t.apply((0,s._)(r),arguments),writable:!0,configurable:!0}),r.name="".concat(r.name," [").concat(e,"]"),r.stack,delete r.name,r}return(0,u._)(o,[{key:"code",get:function(){return e},set:function(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(e,"]: ").concat(this.message)}}]),o}(r)}function N(e){for(var t="",r=e.length,n="-"===e[0]?1:0;r>=n+4;r-=3)t="_".concat(e.slice(r-3,r)).concat(t);return"".concat(e.slice(0,r)).concat(t)}function W(e,t,r,n,o,i){if(e>r||e<t){var s,a=(void 0===t?"undefined":(0,c._)(t))==="bigint"?"n":"";throw s=i>3?0===t||t===BigInt(0)?">= 0".concat(a," and < 2").concat(a," ** ").concat((i+1)*8).concat(a):">= -(2".concat(a," ** ").concat((i+1)*8-1).concat(a,") and < 2 ** ")+"".concat((i+1)*8-1).concat(a):">= ".concat(t).concat(a," and <= ").concat(r).concat(a),new U.ERR_OUT_OF_RANGE("value",s,e)}D(o,"offset"),(void 0===n[o]||void 0===n[o+i])&&J(o,n.length-(i+1))}function D(e,t){if("number"!=typeof e)throw new U.ERR_INVALID_ARG_TYPE(t,"number",e)}function J(e,t,r){if(Math.floor(e)!==e)throw D(e,r),new U.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new U.ERR_BUFFER_OUT_OF_BOUNDS;throw new U.ERR_OUT_OF_RANGE(r||"offset",">= ".concat(r?1:0," and <= ").concat(t),e)}L("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?"".concat(e," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),L("ERR_INVALID_ARG_TYPE",function(e,t){return'The "'.concat(e,'" argument must be of type number. Received type ').concat(void 0===t?"undefined":(0,c._)(t))},TypeError),L("ERR_OUT_OF_RANGE",function(e,t,r){var n='The value of "'.concat(e,'" is out of range.'),o=r;return Number.isInteger(r)&&Math.abs(r)>4294967296?o=N(String(r)):(void 0===r?"undefined":(0,c._)(r))==="bigint"&&(o=String(r),(r>Math.pow(BigInt(2),BigInt(32))||r<-Math.pow(BigInt(2),BigInt(32)))&&(o=N(o)),o+="n"),n+=" It must be ".concat(t,". Received ").concat(o)},RangeError);var q=/[^+/0-9A-Za-z-_]/g;function G(e,t){t=t||1/0;for(var r,n=e.length,o=null,i=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!o){if(r>56319||s+1===n){(t-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),o=r;continue}r=(o-55296<<10|r-56320)+65536}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return i}function H(e){return h.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(q,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function z(e,t,r,n){var o;for(o=0;o<n&&!(o+r>=t.length)&&!(o>=e.length);++o)t[o+r]=e[o];return o}function V(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}var X=function(){for(var e="0123456789abcdef",t=Array(256),r=0;r<16;++r)for(var n=16*r,o=0;o<16;++o)t[n+o]=e[r]+e[o];return t}();function K(e){return"undefined"==typeof BigInt?Z:e}function Z(){throw Error("BigInt not supported")}}),i("hilwa",function(t,r){e(t.exports,"toByteArray",function(){return n},function(e){return n=e}),e(t.exports,"fromByteArray",function(){return o},function(e){return o=e}),n=function(e){var t,r,n=function(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var n=r===t?0:4-r%4;return[r,n]}(e),o=n[0],i=n[1],u=new a((o+i)*3/4-i),l=0,c=i>0?o-4:o;for(r=0;r<c;r+=4)t=s[e.charCodeAt(r)]<<18|s[e.charCodeAt(r+1)]<<12|s[e.charCodeAt(r+2)]<<6|s[e.charCodeAt(r+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;return 2===i&&(t=s[e.charCodeAt(r)]<<2|s[e.charCodeAt(r+1)]>>4,u[l++]=255&t),1===i&&(t=s[e.charCodeAt(r)]<<10|s[e.charCodeAt(r+1)]<<4|s[e.charCodeAt(r+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t),u},o=function(e){for(var t,r=e.length,n=r%3,o=[],s=0,a=r-n;s<a;s+=16383)o.push(function(e,t,r){for(var n,o=[],s=t;s<r;s+=3)o.push(i[(n=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]))>>18&63]+i[n>>12&63]+i[n>>6&63]+i[63&n]);return o.join("")}(e,s,s+16383>a?a:s+16383));return 1===n?o.push(i[(t=e[r-1])>>2]+i[t<<4&63]+"=="):2===n&&o.push(i[(t=(e[r-2]<<8)+e[r-1])>>10]+i[t>>4&63]+i[t<<2&63]+"="),o.join("")};for(var n,o,i=[],s=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,c=u.length;l<c;++l)i[l]=u[l],s[u.charCodeAt(l)]=l;s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63}),i("5WO87",function(t,r){var n,o;e(t.exports,"read",function(){return n},function(e){return n=e}),e(t.exports,"write",function(){return o},function(e){return o=e}),n=function(e,t,r,n,o){var i,s,a=8*o-n-1,u=(1<<a)-1,l=u>>1,c=-7,f=r?o-1:0,h=r?-1:1,p=e[t+f];for(f+=h,i=p&(1<<-c)-1,p>>=-c,c+=a;c>0;i=256*i+e[t+f],f+=h,c-=8);for(s=i&(1<<-c)-1,i>>=-c,c+=n;c>0;s=256*s+e[t+f],f+=h,c-=8);if(0===i)i=1-l;else{if(i===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),i-=l}return(p?-1:1)*s*Math.pow(2,i-n)},o=function(e,t,r,n,o,i){var s,a,u,l=8*i-o-1,c=(1<<l)-1,f=c>>1,h=23===o?5960464477539062e-23:0,p=n?0:i-1,d=n?1:-1,y=t<0||0===t&&1/t<0?1:0;for(isNaN(t=Math.abs(t))||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),s+f>=1?t+=h/u:t+=h*Math.pow(2,1-f),t*u>=2&&(s++,u/=2),s+f>=c?(a=0,s=c):s+f>=1?(a=(t*u-1)*Math.pow(2,o),s+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,o),s=0));o>=8;e[r+p]=255&a,p+=d,a/=256,o-=8);for(s=s<<o|a,l+=o;l>0;e[r+p]=255&s,p+=d,s/=256,l-=8);e[r+p-d]|=128*y}}),i("3qWgZ",function(e,t){var r,n,o,i=e.exports={};function s(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function u(e){if(r===setTimeout)return setTimeout(e,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(e){r=s}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var l=[],c=!1,f=-1;function h(){c&&o&&(c=!1,o.length?l=o.concat(l):f=-1,l.length&&p())}function p(){if(!c){var e=u(h);c=!0;for(var t=l.length;t;){for(o=l,l=[];++f<t;)o&&o[f].run();f=-1,t=l.length}o=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function y(){}i.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new d(e,t)),1!==l.length||c||u(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(e){return[]},i.binding=function(e){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw Error("process.chdir is not supported")},i.umask=function(){return 0}}),i("aTBmQ",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.VERSION=void 0,e.exports.VERSION="4.26.0"}),i("erIW1",function(e,t){var r=o("hcCmL"),n=o("kSuI9"),i=o("butdw"),s=o("4GJKx"),a=o("1wc17"),u=o("3sHb8"),l=o("cv9Rk"),c=o("c6Xmf"),f=o("cfJBl"),h=o("l29cN"),p=o("fvlxi").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.readableStreamAsyncIterable=e.exports.Stream=void 0;var d=o("2Q7kV"),y=(o("huaPE"),o("huaPE")),_=function(){function e(t,r){(0,s._)(this,e),this.iterator=t,this.controller=r}return(0,a._)(e,[{key:Symbol.asyncIterator,value:function(){return this.iterator()}},{key:"tee",value:function(){var t=[],r=[],n=this.iterator(),o=function(e){return{next:function(){if(0===e.length){var o=n.next();t.push(o),r.push(o)}return e.shift()}}};return[new e(function(){return o(t)},this.controller),new e(function(){return o(r)},this.controller)]}},{key:"toReadableStream",value:function(){var e,t=this,r=new TextEncoder;return new d.ReadableStream({start:function(){return(0,n._)(function(){return(0,h.__generator)(this,function(r){return e=t[Symbol.asyncIterator](),[2]})})()},pull:function(t){return(0,n._)(function(){var n,o,i,s;return(0,h.__generator)(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,e.next()];case 1:if(o=(n=a.sent()).value,n.done)return[2,t.close()];return i=r.encode(JSON.stringify(o)+"\n"),t.enqueue(i),[3,3];case 2:return s=a.sent(),t.error(s),[3,3];case 3:return[2]}})})()},cancel:function(){return(0,n._)(function(){var t;return(0,h.__generator)(this,function(r){switch(r.label){case 0:return[4,null===(t=e.return)||void 0===t?void 0:t.call(e)];case 1:return r.sent(),[2]}})})()}})}}],[{key:"fromSSEResponse",value:function(t,n){var o=!1,s=new g;function a(){return(a=(0,f._)(function(){var e,o,a,u,l,c,f,p,d,_,g,w,x,O,P,A,E,k,S,R,j,I,C,M;return(0,h.__generator)(this,function(h){switch(h.label){case 0:if(!t.body)throw n.abort(),new y.OpenAIError("Attempted to iterate over a response with no body");e=new b,o=m(t.body),a=!1,u=!1,h.label=1;case 1:h.trys.push([1,13,14,19]),c=(0,r._)(o),h.label=2;case 2:return[4,(0,i._)(c.next())];case 3:if(!(a=!(f=h.sent()).done))return[3,12];p=f.value,d=!0,_=!1,g=void 0,h.label=4;case 4:h.trys.push([4,9,10,11]),w=e.decode(p)[Symbol.iterator](),h.label=5;case 5:if(d=(x=w.next()).done)return[3,8];if(O=x.value,!(P=s.decode(O)))return[3,7];return[4,P];case 6:h.sent(),h.label=7;case 7:return d=!0,[3,5];case 8:return[3,11];case 9:return A=h.sent(),_=!0,g=A,[3,11];case 10:try{d||null==w.return||w.return()}finally{if(_)throw g}return[7];case 11:return a=!1,[3,2];case 12:return[3,19];case 13:return E=h.sent(),u=!0,l=E,[3,19];case 14:if(h.trys.push([14,,17,18]),!(a&&null!=c.return))return[3,16];return[4,c.return()];case 15:h.sent(),h.label=16;case 16:return[3,18];case 17:if(u)throw l;return[7];case 18:return[7];case 19:k=!0,S=!1,R=void 0,h.label=20;case 20:h.trys.push([20,25,26,27]),j=e.flush()[Symbol.iterator](),h.label=21;case 21:if(k=(I=j.next()).done)return[3,24];if(C=I.value,!(M=s.decode(C)))return[3,23];return[4,M];case 22:h.sent(),h.label=23;case 23:return k=!0,[3,21];case 24:return[3,27];case 25:return A=h.sent(),S=!0,R=A,[3,27];case 26:try{k||null==j.return||j.return()}finally{if(S)throw R}return[7];case 27:return[2]}})})).apply(this,arguments)}function u(){return(u=(0,f._)(function(){var e,t,s,u,l,c,f,p,d,_;return(0,h.__generator)(this,function(h){switch(h.label){case 0:if(o)throw Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0,e=!1,h.label=1;case 1:h.trys.push([1,15,16,17]),t=!1,s=!1,h.label=2;case 2:h.trys.push([2,8,9,14]),l=(0,r._)(function(){return a.apply(this,arguments)}()),h.label=3;case 3:return[4,(0,i._)(l.next())];case 4:if(!(t=!(c=h.sent()).done))return[3,7];if(f=c.value,e)return[3,6];if(f.data.startsWith("[DONE]"))return e=!0,[3,6];if(null!==f.event)return[3,6];p=void 0;try{p=JSON.parse(f.data)}catch(e){throw console.error("Could not parse message into JSON:",f.data),console.error("From chunk:",f.raw),e}if(p&&p.error)throw new y.APIError(void 0,p.error,void 0,void 0);return[4,p];case 5:h.sent(),h.label=6;case 6:return t=!1,[3,3];case 7:return[3,14];case 8:return d=h.sent(),s=!0,u=d,[3,14];case 9:if(h.trys.push([9,,12,13]),!(t&&null!=l.return))return[3,11];return[4,l.return()];case 10:h.sent(),h.label=11;case 11:return[3,13];case 12:if(s)throw u;return[7];case 13:return[7];case 14:return e=!0,[3,17];case 15:if((_=h.sent())instanceof Error&&"AbortError"===_.name)return[2];throw _;case 16:return e||n.abort(),[7];case 17:return[2]}})})).apply(this,arguments)}return new e(function(){return u.apply(this,arguments)},n)}},{key:"fromReadableStream",value:function(t,n){var o=!1;function s(){return(s=(0,f._)(function(){var e,n,o,s,a,u,l,c,f,p,d,y,_,g,w,x,O,P,A,E;return(0,h.__generator)(this,function(h){switch(h.label){case 0:e=new b,n=m(t),o=!1,s=!1,h.label=1;case 1:h.trys.push([1,13,14,19]),u=(0,r._)(n),h.label=2;case 2:return[4,(0,i._)(u.next())];case 3:if(!(o=!(l=h.sent()).done))return[3,12];c=l.value,f=!0,p=!1,d=void 0,h.label=4;case 4:h.trys.push([4,9,10,11]),y=e.decode(c)[Symbol.iterator](),h.label=5;case 5:if(f=(_=y.next()).done)return[3,8];return[4,_.value];case 6:h.sent(),h.label=7;case 7:return f=!0,[3,5];case 8:return[3,11];case 9:return g=h.sent(),p=!0,d=g,[3,11];case 10:try{f||null==y.return||y.return()}finally{if(p)throw d}return[7];case 11:return o=!1,[3,2];case 12:return[3,19];case 13:return w=h.sent(),s=!0,a=w,[3,19];case 14:if(h.trys.push([14,,17,18]),!(o&&null!=u.return))return[3,16];return[4,u.return()];case 15:h.sent(),h.label=16;case 16:return[3,18];case 17:if(s)throw a;return[7];case 18:return[7];case 19:x=!0,O=!1,P=void 0,h.label=20;case 20:h.trys.push([20,25,26,27]),A=e.flush()[Symbol.iterator](),h.label=21;case 21:if(x=(E=A.next()).done)return[3,24];return[4,E.value];case 22:h.sent(),h.label=23;case 23:return x=!0,[3,21];case 24:return[3,27];case 25:return g=h.sent(),O=!0,P=g,[3,27];case 26:try{x||null==A.return||A.return()}finally{if(O)throw P}return[7];case 27:return[2]}})})).apply(this,arguments)}function a(){return(a=(0,f._)(function(){var e,t,a,u,l,c,f,p,d;return(0,h.__generator)(this,function(h){switch(h.label){case 0:if(o)throw Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0,e=!1,h.label=1;case 1:h.trys.push([1,15,16,17]),t=!1,a=!1,h.label=2;case 2:h.trys.push([2,8,9,14]),l=(0,r._)(function(){return s.apply(this,arguments)}()),h.label=3;case 3:return[4,(0,i._)(l.next())];case 4:if(!(t=!(c=h.sent()).done))return[3,7];if(f=c.value,e||!f)return[3,6];return[4,JSON.parse(f)];case 5:h.sent(),h.label=6;case 6:return t=!1,[3,3];case 7:return[3,14];case 8:return p=h.sent(),a=!0,u=p,[3,14];case 9:if(h.trys.push([9,,12,13]),!(t&&null!=l.return))return[3,11];return[4,l.return()];case 10:h.sent(),h.label=11;case 11:return[3,13];case 12:if(a)throw u;return[7];case 13:return[7];case 14:return e=!0,[3,17];case 15:if((d=h.sent())instanceof Error&&"AbortError"===d.name)return[2];throw d;case 16:return e||n.abort(),[7];case 17:return[2]}})})).apply(this,arguments)}return new e(function(){return a.apply(this,arguments)},n)}}]),e}();e.exports.Stream=_;var g=function(){function e(){(0,s._)(this,e),this.event=null,this.data=[],this.chunks=[]}return(0,a._)(e,[{key:"decode",value:function(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;var t,r,n={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],n}if(this.chunks.push(e),e.startsWith(":"))return null;var o=(0,l._)(-1!==(r=(t=e).indexOf(":"))?[t.substring(0,r),":",t.substring(r+1)]:[t,"",""],3),i=o[0],s=(o[1],o[2]);return s.startsWith(" ")&&(s=s.substring(1)),"event"===i?this.event=s:"data"===i&&this.data.push(s),null}}]),e}(),b=function(){function e(){(0,s._)(this,e),this.buffer=[],this.trailingCR=!1}return(0,a._)(e,[{key:"decode",value:function(t){var r=this.decodeText(t);if(this.trailingCR&&(r="\r"+r,this.trailingCR=!1),r.endsWith("\r")&&(this.trailingCR=!0,r=r.slice(0,-1)),!r)return[];var n=e.NEWLINE_CHARS.has(r[r.length-1]||""),o=r.split(e.NEWLINE_REGEXP);return 1!==o.length||n?(this.buffer.length>0&&(o=[this.buffer.join("")+o[0]].concat((0,c._)(o.slice(1))),this.buffer=[]),n||(this.buffer=[o.pop()||""]),o):(this.buffer.push(o[0]),[])}},{key:"decodeText",value:function(e){if(null==e)return"";if("string"==typeof e)return e;if(void 0!==p){if(e instanceof p)return e.toString();if(e instanceof Uint8Array)return p.from(e).toString();throw new y.OpenAIError("Unexpected: received non-Uint8Array (".concat(e.constructor.name,') stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.'))}if("undefined"!=typeof TextDecoder){if(e instanceof Uint8Array||e instanceof ArrayBuffer){var t;return null!==(t=this.textDecoder)&&void 0!==t||(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e)}throw new y.OpenAIError("Unexpected: received non-Uint8Array/ArrayBuffer (".concat(e.constructor.name,") in a web platform. Please report this error."))}throw new y.OpenAIError("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}},{key:"flush",value:function(){if(!this.buffer.length&&!this.trailingCR)return[];var e=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,e}}]),e}();function m(e){if(e[Symbol.asyncIterator])return e;var t=e.getReader();return(0,u._)({next:function(){return(0,n._)(function(){var e,r;return(0,h.__generator)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,t.read()];case 1:return(null==(e=n.sent())?void 0:e.done)&&t.releaseLock(),[2,e];case 2:throw r=n.sent(),t.releaseLock(),r;case 3:return[2]}})})()},return:function(){return(0,n._)(function(){var e;return(0,h.__generator)(this,function(r){switch(r.label){case 0:return e=t.cancel(),t.releaseLock(),[4,e];case 1:return r.sent(),[2,{done:!0,value:void 0}]}})})()}},Symbol.asyncIterator,function(){return this})}b.NEWLINE_CHARS=new Set(["\n","\r","\v","\f","\x1c","\x1d","\x1e","","\u2028","\u2029"]),b.NEWLINE_REGEXP=/\r\n|[\n\r\x0b\x0c\x1c\x1d\x1e\x85\u2028\u2029]/g,e.exports.readableStreamAsyncIterable=m}),i("2Q7kV",function(e,t){var r=o("fu0xX"),n=o("7DnOg");r.kind||r.setShims(n.getRuntime(),{auto:!0});var i=!0,s=!1,a=void 0;try{for(var u,l=Object.keys(r)[Symbol.iterator]();!(i=(u=l.next()).done);i=!0)!function(){var t=u.value;Object.defineProperty(e.exports,t,{get:function(){return r[t]}})}()}catch(e){s=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(s)throw a}}}),i("fu0xX",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.setShims=e.exports.isFsReadStream=e.exports.fileFromPath=e.exports.getDefaultAgent=e.exports.getMultipartRequestOptions=e.exports.ReadableStream=e.exports.File=e.exports.Blob=e.exports.FormData=e.exports.Headers=e.exports.Response=e.exports.Request=e.exports.fetch=e.exports.kind=e.exports.auto=void 0,e.exports.auto=!1,e.exports.kind=void 0,e.exports.fetch=void 0,e.exports.Request=void 0,e.exports.Response=void 0,e.exports.Headers=void 0,e.exports.FormData=void 0,e.exports.Blob=void 0,e.exports.File=void 0,e.exports.ReadableStream=void 0,e.exports.getMultipartRequestOptions=void 0,e.exports.getDefaultAgent=void 0,e.exports.fileFromPath=void 0,e.exports.isFsReadStream=void 0,e.exports.setShims=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{auto:!1};if(e.exports.auto)throw Error("you must `import 'openai/shims/".concat(t.kind,"'` before importing anything else from openai"));if(e.exports.kind)throw Error("can't `import 'openai/shims/".concat(t.kind,"'` after `import 'openai/shims/").concat(e.exports.kind,"'`"));e.exports.auto=r.auto,e.exports.kind=t.kind,e.exports.fetch=t.fetch,e.exports.Request=t.Request,e.exports.Response=t.Response,e.exports.Headers=t.Headers,e.exports.FormData=t.FormData,e.exports.Blob=t.Blob,e.exports.File=t.File,e.exports.ReadableStream=t.ReadableStream,e.exports.getMultipartRequestOptions=t.getMultipartRequestOptions,e.exports.getDefaultAgent=t.getDefaultAgent,e.exports.fileFromPath=t.fileFromPath,e.exports.isFsReadStream=t.isFsReadStream}}),i("7DnOg",function(e,t){var r=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),n=e.exports&&e.exports.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(e.exports,"__esModule",{value:!0}),n(o("8x4ib"),e.exports)}),i("8x4ib",function(e,t){var r=o("kSuI9"),n=o("4GJKx"),i=o("do9pw"),s=o("cxjpp"),a=o("l29cN");Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.getRuntime=void 0;var u=o("3DG5d");e.exports.getRuntime=function(){var e,t,o,l,c,f=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).manuallyImported,h=f?"You may need to use polyfills":"Add one of these imports before your first `import … from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";try{t=fetch,o=Request,l=Response,c=Headers}catch(e){throw Error("this environment is missing the following Web Fetch API type: ".concat(e.message,". ").concat(h))}return{kind:"web",fetch:t,Request:o,Response:l,Headers:c,FormData:"undefined"!=typeof FormData?FormData:function e(){throw(0,n._)(this,e),Error("file uploads aren't supported in this environment yet as 'FormData' is undefined. ".concat(h))},Blob:"undefined"!=typeof Blob?Blob:function e(){throw(0,n._)(this,e),Error("file uploads aren't supported in this environment yet as 'Blob' is undefined. ".concat(h))},File:"undefined"!=typeof File?File:function e(){throw(0,n._)(this,e),Error("file uploads aren't supported in this environment yet as 'File' is undefined. ".concat(h))},ReadableStream:"undefined"!=typeof ReadableStream?ReadableStream:function e(){throw(0,n._)(this,e),Error("streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ".concat(h))},getMultipartRequestOptions:(e=(0,r._)(function(e,t){return(0,a.__generator)(this,function(r){return[2,(0,s._)((0,i._)({},t),{body:new u.MultipartBody(e)})]})}),function(t,r){return e.apply(this,arguments)}),getDefaultAgent:function(e){},fileFromPath:function(){throw Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:function(e){return!1}}}}),i("3DG5d",function(e,t){var r=o("4GJKx"),n=o("1wc17");Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.MultipartBody=void 0;var i=function(){function e(t){(0,r._)(this,e),this.body=t}return(0,n._)(e,[{key:Symbol.toStringTag,get:function(){return"MultipartBody"}}]),e}();e.exports.MultipartBody=i}),i("huaPE",function(e,t){var r=o("4GJKx"),n=o("1wc17"),i=o("dcsZi"),s=o("FuVm8"),a=o("ohfOJ");Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.InternalServerError=e.exports.RateLimitError=e.exports.UnprocessableEntityError=e.exports.ConflictError=e.exports.NotFoundError=e.exports.PermissionDeniedError=e.exports.AuthenticationError=e.exports.BadRequestError=e.exports.APIConnectionTimeoutError=e.exports.APIConnectionError=e.exports.APIUserAbortError=e.exports.APIError=e.exports.OpenAIError=void 0;var u=o("cGp6U"),l=function(e){(0,i._)(n,e);var t=(0,a._)(n);function n(){return(0,r._)(this,n),t.apply(this,arguments)}return n}((0,s._)(Error));e.exports.OpenAIError=l;var c=function(e){(0,i._)(o,e);var t=(0,a._)(o);function o(e,n,i,s){var a;return(0,r._)(this,o),(a=t.call(this,"".concat(o.makeMessage(e,n,i)))).status=e,a.headers=s,a.error=n,a.code=null==n?void 0:n.code,a.param=null==n?void 0:n.param,a.type=null==n?void 0:n.type,a}return(0,n._)(o,null,[{key:"makeMessage",value:function(e,t,r){var n=(null==t?void 0:t.message)?"string"==typeof t.message?t.message:JSON.stringify(t.message):t?JSON.stringify(t):r;return e&&n?"".concat(e," ").concat(n):e?"".concat(e," status code (no body)"):n||"(no status code or body)"}},{key:"generate",value:function(e,t,r,n){if(!e)return new h({cause:(0,u.castToError)(t)});var i=null==t?void 0:t.error;return 400===e?new d(e,i,r,n):401===e?new y(e,i,r,n):403===e?new _(e,i,r,n):404===e?new g(e,i,r,n):409===e?new b(e,i,r,n):422===e?new m(e,i,r,n):429===e?new w(e,i,r,n):e>=500?new x(e,i,r,n):new o(e,i,r,n)}}]),o}(l);e.exports.APIError=c;var f=function(e){(0,i._)(n,e);var t=(0,a._)(n);function n(){var e,o=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).message;return(0,r._)(this,n),(e=t.call(this,void 0,void 0,o||"Request was aborted.",void 0)).status=void 0,e}return n}(c);e.exports.APIUserAbortError=f;var h=function(e){(0,i._)(n,e);var t=(0,a._)(n);function n(e){var o,i=e.message,s=e.cause;return(0,r._)(this,n),(o=t.call(this,void 0,void 0,i||"Connection error.",void 0)).status=void 0,s&&(o.cause=s),o}return n}(c);e.exports.APIConnectionError=h;var p=function(e){(0,i._)(n,e);var t=(0,a._)(n);function n(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).message;return(0,r._)(this,n),t.call(this,{message:null!=e?e:"Request timed out."})}return n}(h);e.exports.APIConnectionTimeoutError=p;var d=function(e){(0,i._)(n,e);var t=(0,a._)(n);function n(){var e;return(0,r._)(this,n),e=t.call.apply(t,[this].concat(Array.prototype.slice.call(arguments))),e.status=400,e}return n}(c);e.exports.BadRequestError=d;var y=function(e){(0,i._)(n,e);var t=(0,a._)(n);function n(){var e;return(0,r._)(this,n),e=t.call.apply(t,[this].concat(Array.prototype.slice.call(arguments))),e.status=401,e}return n}(c);e.exports.AuthenticationError=y;var _=function(e){(0,i._)(n,e);var t=(0,a._)(n);function n(){var e;return(0,r._)(this,n),e=t.call.apply(t,[this].concat(Array.prototype.slice.call(arguments))),e.status=403,e}return n}(c);e.exports.PermissionDeniedError=_;var g=function(e){(0,i._)(n,e);var t=(0,a._)(n);function n(){var e;return(0,r._)(this,n),e=t.call.apply(t,[this].concat(Array.prototype.slice.call(arguments))),e.status=404,e}return n}(c);e.exports.NotFoundError=g;var b=function(e){(0,i._)(n,e);var t=(0,a._)(n);function n(){var e;return(0,r._)(this,n),e=t.call.apply(t,[this].concat(Array.prototype.slice.call(arguments))),e.status=409,e}return n}(c);e.exports.ConflictError=b;var m=function(e){(0,i._)(n,e);var t=(0,a._)(n);function n(){var e;return(0,r._)(this,n),e=t.call.apply(t,[this].concat(Array.prototype.slice.call(arguments))),e.status=422,e}return n}(c);e.exports.UnprocessableEntityError=m;var w=function(e){(0,i._)(n,e);var t=(0,a._)(n);function n(){var e;return(0,r._)(this,n),e=t.call.apply(t,[this].concat(Array.prototype.slice.call(arguments))),e.status=429,e}return n}(c);e.exports.RateLimitError=w;var x=function(e){(0,i._)(n,e);var t=(0,a._)(n);function n(){return(0,r._)(this,n),t.apply(this,arguments)}return n}(c);e.exports.InternalServerError=x}),i("8rxPZ",function(e,t){var r,n,i,s,a=o("hcCmL"),u=o("kSuI9"),l=o("do9pw"),c=o("cxjpp"),f=o("cv9Rk"),h=o("l0HdX"),p=o("l29cN"),d=o("fvlxi").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.createForm=e.exports.multipartFormRequestOptions=e.exports.maybeMultipartFormRequestOptions=e.exports.isMultipartBody=e.exports.toFile=e.exports.isUploadable=e.exports.isBlobLike=e.exports.isFileLike=e.exports.isResponseLike=e.exports.fileFromPath=void 0;var y=(o("2Q7kV"),o("2Q7kV"));function _(e,t){return g.apply(this,arguments)}function g(){return(g=(0,u._)(function(t,r){var n,o,i,s,a,u,f,h=arguments;return(0,p.__generator)(this,function(p){switch(p.label){case 0:return n=h.length>2&&void 0!==h[2]?h[2]:{},[4,t];case 1:if(t=p.sent(),!(0,e.exports.isResponseLike)(t))return[3,3];return[4,t.blob()];case 2:return o=p.sent(),r||(r=null!==(i=new URL(t.url).pathname.split(/[\\/]/).pop())&&void 0!==i?i:"unknown_file"),[2,new y.File([o],r,n)];case 3:return[4,function(e){return b.apply(this,arguments)}(t)];case 4:var d,_;return s=p.sent(),r||(r=null!==(a=m((d=t).name)||m(d.filename)||(null===(_=m(d.path))||void 0===_?void 0:_.split(/[\\/]/).pop()))&&void 0!==a?a:"unknown_file"),n.type||"string"!=typeof(f=null===(u=s[0])||void 0===u?void 0:u.type)||(n=(0,c._)((0,l._)({},n),{type:f})),[2,new y.File(s,r,n)]}})})).apply(this,arguments)}function b(){return(b=(0,u._)(function(t){var r,n,o,i,s,u,l,c,f,d;return(0,p.__generator)(this,function(p){switch(p.label){case 0:if(n=[],!("string"==typeof t||ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return[3,1];return n.push(t),[3,17];case 1:if(!(0,e.exports.isBlobLike)(t))return[3,3];return o=n.push,[4,t.arrayBuffer()];case 2:return o.apply(n,[p.sent()]),[3,17];case 3:if(!w(t))return[3,16];i=!1,s=!1,p.label=4;case 4:p.trys.push([4,9,10,15]),l=(0,a._)(t),p.label=5;case 5:return[4,l.next()];case 6:if(!(i=!(c=p.sent()).done))return[3,8];f=c.value,n.push(f),p.label=7;case 7:return i=!1,[3,5];case 8:return[3,15];case 9:return d=p.sent(),s=!0,u=d,[3,15];case 10:if(p.trys.push([10,,13,14]),!(i&&null!=l.return))return[3,12];return[4,l.return()];case 11:p.sent(),p.label=12;case 12:return[3,14];case 13:if(s)throw u;return[7];case 14:return[7];case 15:return[3,17];case 16:var y;throw Error("Unexpected data type: ".concat(void 0===t?"undefined":(0,h._)(t),"; constructor: ").concat(null==t?void 0:null===(r=t.constructor)||void 0===r?void 0:r.name,"; props: ").concat((y=Object.getOwnPropertyNames(t),"[".concat(y.map(function(e){return'"'.concat(e,'"')}).join(", "),"]"))));case 17:return[2,n]}})})).apply(this,arguments)}Object.defineProperty(e.exports,"fileFromPath",{enumerable:!0,get:function(){return y.fileFromPath}}),e.exports.isResponseLike=function(e){return null!=e&&"object"==typeof e&&"string"==typeof e.url&&"function"==typeof e.blob},e.exports.isFileLike=function(t){return null!=t&&"object"==typeof t&&"string"==typeof t.name&&"number"==typeof t.lastModified&&(0,e.exports.isBlobLike)(t)},e.exports.isBlobLike=function(e){return null!=e&&"object"==typeof e&&"number"==typeof e.size&&"string"==typeof e.type&&"function"==typeof e.text&&"function"==typeof e.slice&&"function"==typeof e.arrayBuffer},e.exports.isUploadable=function(t){return(0,e.exports.isFileLike)(t)||(0,e.exports.isResponseLike)(t)||(0,y.isFsReadStream)(t)},e.exports.toFile=_;var m=function(e){return"string"==typeof e?e:void 0!==d&&e instanceof d?String(e):void 0},w=function(e){return null!=e&&"object"==typeof e&&"function"==typeof e[Symbol.asyncIterator]};e.exports.isMultipartBody=function(e){return e&&"object"==typeof e&&e.body&&"MultipartBody"===e[Symbol.toStringTag]};var x=(r=(0,u._)(function(t){var r;return(0,p.__generator)(this,function(n){switch(n.label){case 0:if(!A(t.body))return[2,t];return[4,(0,e.exports.createForm)(t.body)];case 1:return r=n.sent(),[2,(0,y.getMultipartRequestOptions)(r,t)]}})}),function(e){return r.apply(this,arguments)});e.exports.maybeMultipartFormRequestOptions=x;var O=(n=(0,u._)(function(t){var r;return(0,p.__generator)(this,function(n){switch(n.label){case 0:return[4,(0,e.exports.createForm)(t.body)];case 1:return r=n.sent(),[2,(0,y.getMultipartRequestOptions)(r,t)]}})}),function(e){return n.apply(this,arguments)});e.exports.multipartFormRequestOptions=O;var P=(i=(0,u._)(function(e){var t;return(0,p.__generator)(this,function(r){switch(r.label){case 0:return t=new y.FormData,[4,Promise.all(Object.entries(e||{}).map(function(e){var r=(0,f._)(e,2),n=r[0],o=r[1];return E(t,n,o)}))];case 1:return r.sent(),[2,t]}})}),function(e){return i.apply(this,arguments)});e.exports.createForm=P;var A=function(t){if((0,e.exports.isUploadable)(t))return!0;if(Array.isArray(t))return t.some(A);if(t&&"object"==typeof t){for(var r in t)if(A(t[r]))return!0}return!1},E=(s=(0,u._)(function(t,r,n){var o;return(0,p.__generator)(this,function(i){switch(i.label){case 0:if(void 0===n)return[2];if(null==n)throw TypeError('Received null for "'.concat(r,"\"; to pass null in FormData, you must use the string 'null'"));if(!("string"==typeof n||"number"==typeof n||"boolean"==typeof n))return[3,1];return t.append(r,String(n)),[3,8];case 1:if(!(0,e.exports.isUploadable)(n))return[3,3];return[4,_(n)];case 2:return o=i.sent(),t.append(r,o),[3,8];case 3:if(!Array.isArray(n))return[3,5];return[4,Promise.all(n.map(function(e){return E(t,r+"[]",e)}))];case 4:case 6:return i.sent(),[3,8];case 5:if("object"!=typeof n)return[3,7];return[4,Promise.all(Object.entries(n).map(function(e){var n=(0,f._)(e,2),o=n[0],i=n[1];return E(t,"".concat(r,"[").concat(o,"]"),i)}))];case 7:throw TypeError("Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ".concat(n," instead"));case 8:return[2]}})}),function(e,t,r){return s.apply(this,arguments)})}),i("5kUHX",function(e,t){var r=o("4GJKx"),n=o("1wc17"),i=o("dcsZi"),s=o("ohfOJ");Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.CursorPage=e.exports.Page=void 0;var a=o("cGp6U"),u=function(e){(0,i._)(o,e);var t=(0,s._)(o);function o(e,n,i,s){var a;return(0,r._)(this,o),(a=t.call(this,e,n,i,s)).data=i.data||[],a.object=i.object,a}return(0,n._)(o,[{key:"getPaginatedItems",value:function(){var e;return null!==(e=this.data)&&void 0!==e?e:[]}},{key:"nextPageParams",value:function(){return null}},{key:"nextPageInfo",value:function(){return null}}]),o}(a.AbstractPage);e.exports.Page=u;var l=function(e){(0,i._)(o,e);var t=(0,s._)(o);function o(e,n,i,s){var a;return(0,r._)(this,o),(a=t.call(this,e,n,i,s)).data=i.data||[],a}return(0,n._)(o,[{key:"getPaginatedItems",value:function(){var e;return null!==(e=this.data)&&void 0!==e?e:[]}},{key:"nextPageParams",value:function(){var e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;var t=Object.fromEntries(e.url.searchParams);return Object.keys(t).length?t:null}},{key:"nextPageInfo",value:function(){var e,t=this.getPaginatedItems();if(!t.length)return null;var r=null===(e=t[t.length-1])||void 0===e?void 0:e.id;return r?{params:{after:r}}:null}}]),o}(a.AbstractPage);e.exports.CursorPage=l}),i("2baia",function(e,t){var r=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),n=e.exports&&e.exports.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Moderations=e.exports.Models=e.exports.ModelsPage=e.exports.Images=e.exports.FineTuning=e.exports.Files=e.exports.FileObjectsPage=e.exports.Embeddings=e.exports.Completions=e.exports.Beta=e.exports.Audio=void 0,n(o("6Dlik"),e.exports),n(o("DZAwn"),e.exports);var i=o("3iM2n");Object.defineProperty(e.exports,"Audio",{enumerable:!0,get:function(){return i.Audio}});var s=o("7PMjq");Object.defineProperty(e.exports,"Beta",{enumerable:!0,get:function(){return s.Beta}});var a=o("gzpi9");Object.defineProperty(e.exports,"Completions",{enumerable:!0,get:function(){return a.Completions}});var u=o("cu85Q");Object.defineProperty(e.exports,"Embeddings",{enumerable:!0,get:function(){return u.Embeddings}});var l=o("bsBYs");Object.defineProperty(e.exports,"FileObjectsPage",{enumerable:!0,get:function(){return l.FileObjectsPage}}),Object.defineProperty(e.exports,"Files",{enumerable:!0,get:function(){return l.Files}});var c=o("iQnBN");Object.defineProperty(e.exports,"FineTuning",{enumerable:!0,get:function(){return c.FineTuning}});var f=o("2qBpa");Object.defineProperty(e.exports,"Images",{enumerable:!0,get:function(){return f.Images}});var h=o("jZEll");Object.defineProperty(e.exports,"ModelsPage",{enumerable:!0,get:function(){return h.ModelsPage}}),Object.defineProperty(e.exports,"Models",{enumerable:!0,get:function(){return h.Models}});var p=o("ayKvp");Object.defineProperty(e.exports,"Moderations",{enumerable:!0,get:function(){return p.Moderations}})}),i("6Dlik",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Completions=e.exports.Chat=void 0;var r=o("1tuso");Object.defineProperty(e.exports,"Chat",{enumerable:!0,get:function(){return r.Chat}});var n=o("1zMkL");Object.defineProperty(e.exports,"Completions",{enumerable:!0,get:function(){return n.Completions}})}),i("1tuso",function(e,t){var r=o("4GJKx"),n=o("dcsZi"),i=o("ohfOJ"),s=Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]},a=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Chat=void 0;var u=o("f8LhV"),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&s(t,e,r);return a(t,e),t}(o("1zMkL")),c=function(e){(0,n._)(o,e);var t=(0,i._)(o);function o(){var e;return(0,r._)(this,o),e=t.call.apply(t,[this].concat(Array.prototype.slice.call(arguments))),e.completions=new l.Completions(e._client),e}return o}(u.APIResource);e.exports.Chat=c,(c=e.exports.Chat||(e.exports.Chat={})).Completions=l.Completions}),i("f8LhV",function(e,t){var r=o("4GJKx");Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.APIResource=void 0,e.exports.APIResource=function e(t){(0,r._)(this,e),this._client=t}}),i("1zMkL",function(e,t){var r=o("4GJKx"),n=o("1wc17"),i=o("dcsZi"),s=o("do9pw"),a=o("cxjpp"),u=o("ohfOJ");Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Completions=void 0;var l=function(e){(0,i._)(o,e);var t=(0,u._)(o);function o(){return(0,r._)(this,o),t.apply(this,arguments)}return(0,n._)(o,[{key:"create",value:function(e,t){var r;return this._client.post("/chat/completions",(0,a._)((0,s._)({body:e},t),{stream:null!==(r=e.stream)&&void 0!==r&&r}))}}]),o}(o("f8LhV").APIResource);e.exports.Completions=l,e.exports.Completions||(e.exports.Completions={})}),i("DZAwn",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0})}),i("3iM2n",function(e,t){var r,n=o("4GJKx"),i=o("dcsZi"),s=o("ohfOJ"),a=Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]},u=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&a(t,e,r);return u(t,e),t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Audio=void 0;var c=o("f8LhV"),f=l(o("1Qqr4")),h=l(o("cWN3M")),p=l(o("2k5SG")),d=function(e){(0,i._)(r,e);var t=(0,s._)(r);function r(){var e;return(0,n._)(this,r),e=t.call.apply(t,[this].concat(Array.prototype.slice.call(arguments))),e.transcriptions=new h.Transcriptions(e._client),e.translations=new p.Translations(e._client),e.speech=new f.Speech(e._client),e}return r}(c.APIResource);e.exports.Audio=d,(r=d=e.exports.Audio||(e.exports.Audio={})).Transcriptions=h.Transcriptions,r.Translations=p.Translations,r.Speech=f.Speech}),i("1Qqr4",function(e,t){var r=o("4GJKx"),n=o("1wc17"),i=o("dcsZi"),s=o("do9pw"),a=o("cxjpp"),u=o("ohfOJ");Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Speech=void 0;var l=function(e){(0,i._)(o,e);var t=(0,u._)(o);function o(){return(0,r._)(this,o),t.apply(this,arguments)}return(0,n._)(o,[{key:"create",value:function(e,t){return this._client.post("/audio/speech",(0,a._)((0,s._)({body:e},t),{__binaryResponse:!0}))}}]),o}(o("f8LhV").APIResource);e.exports.Speech=l,e.exports.Speech||(e.exports.Speech={})}),i("cWN3M",function(e,t){var r=o("4GJKx"),n=o("1wc17"),i=o("dcsZi"),s=o("do9pw"),a=o("ohfOJ");Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Transcriptions=void 0;var u=o("f8LhV"),l=o("cGp6U"),c=function(e){(0,i._)(o,e);var t=(0,a._)(o);function o(){return(0,r._)(this,o),t.apply(this,arguments)}return(0,n._)(o,[{key:"create",value:function(e,t){return this._client.post("/audio/transcriptions",(0,l.multipartFormRequestOptions)((0,s._)({body:e},t)))}}]),o}(u.APIResource);e.exports.Transcriptions=c,e.exports.Transcriptions||(e.exports.Transcriptions={})}),i("2k5SG",function(e,t){var r=o("4GJKx"),n=o("1wc17"),i=o("dcsZi"),s=o("do9pw"),a=o("ohfOJ");Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Translations=void 0;var u=o("f8LhV"),l=o("cGp6U"),c=function(e){(0,i._)(o,e);var t=(0,a._)(o);function o(){return(0,r._)(this,o),t.apply(this,arguments)}return(0,n._)(o,[{key:"create",value:function(e,t){return this._client.post("/audio/translations",(0,l.multipartFormRequestOptions)((0,s._)({body:e},t)))}}]),o}(u.APIResource);e.exports.Translations=c,e.exports.Translations||(e.exports.Translations={})}),i("7PMjq",function(e,t){var r,n=o("4GJKx"),i=o("dcsZi"),s=o("ohfOJ"),a=Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]},u=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&a(t,e,r);return u(t,e),t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Beta=void 0;var c=o("f8LhV"),f=l(o("7DYwt")),h=l(o("cDGDk")),p=l(o("foR0V")),d=function(e){(0,i._)(r,e);var t=(0,s._)(r);function r(){var e;return(0,n._)(this,r),e=t.call.apply(t,[this].concat(Array.prototype.slice.call(arguments))),e.chat=new h.Chat(e._client),e.assistants=new f.Assistants(e._client),e.threads=new p.Threads(e._client),e}return r}(c.APIResource);e.exports.Beta=d,(r=d=e.exports.Beta||(e.exports.Beta={})).Chat=h.Chat,r.Assistants=f.Assistants,r.AssistantsPage=f.AssistantsPage,r.Threads=p.Threads}),i("7DYwt",function(e,t){var r,n=o("4GJKx"),i=o("1wc17"),s=o("dcsZi"),a=o("do9pw"),u=o("cxjpp"),l=o("ohfOJ"),c=Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]},f=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&c(t,e,r);return f(t,e),t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.AssistantsPage=e.exports.Assistants=void 0;var p=o("f8LhV"),d=o("cGp6U"),y=h(e.exports),_=h(o("8SIsg")),g=o("5kUHX"),b=function(e){(0,s._)(r,e);var t=(0,l._)(r);function r(){var e;return(0,n._)(this,r),e=t.call.apply(t,[this].concat(Array.prototype.slice.call(arguments))),e.files=new _.Files(e._client),e}return(0,i._)(r,[{key:"create",value:function(e,t){return this._client.post("/assistants",(0,u._)((0,a._)({body:e},t),{headers:(0,a._)({"OpenAI-Beta":"assistants=v1"},null==t?void 0:t.headers)}))}},{key:"retrieve",value:function(e,t){return this._client.get("/assistants/".concat(e),(0,u._)((0,a._)({},t),{headers:(0,a._)({"OpenAI-Beta":"assistants=v1"},null==t?void 0:t.headers)}))}},{key:"update",value:function(e,t,r){return this._client.post("/assistants/".concat(e),(0,u._)((0,a._)({body:t},r),{headers:(0,a._)({"OpenAI-Beta":"assistants=v1"},null==r?void 0:r.headers)}))}},{key:"list",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return(0,d.isRequestOptions)(e)?this.list({},e):this._client.getAPIList("/assistants",m,(0,u._)((0,a._)({query:e},t),{headers:(0,a._)({"OpenAI-Beta":"assistants=v1"},null==t?void 0:t.headers)}))}},{key:"del",value:function(e,t){return this._client.delete("/assistants/".concat(e),(0,u._)((0,a._)({},t),{headers:(0,a._)({"OpenAI-Beta":"assistants=v1"},null==t?void 0:t.headers)}))}}]),r}(p.APIResource);e.exports.Assistants=b;var m=function(e){(0,s._)(r,e);var t=(0,l._)(r);function r(){return(0,n._)(this,r),t.apply(this,arguments)}return r}(g.CursorPage);e.exports.AssistantsPage=m,(r=b=e.exports.Assistants||(e.exports.Assistants={})).AssistantsPage=y.AssistantsPage,r.Files=_.Files,r.AssistantFilesPage=_.AssistantFilesPage}),i("8SIsg",function(e,t){var r=o("4GJKx"),n=o("1wc17"),i=o("dcsZi"),s=o("do9pw"),a=o("cxjpp"),u=o("ohfOJ"),l=Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]},c=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.AssistantFilesPage=e.exports.Files=void 0;var f=o("f8LhV"),h=o("cGp6U"),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&l(t,e,r);return c(t,e),t}(e.exports),d=o("5kUHX"),y=function(e){(0,i._)(o,e);var t=(0,u._)(o);function o(){return(0,r._)(this,o),t.apply(this,arguments)}return(0,n._)(o,[{key:"create",value:function(e,t,r){return this._client.post("/assistants/".concat(e,"/files"),(0,a._)((0,s._)({body:t},r),{headers:(0,s._)({"OpenAI-Beta":"assistants=v1"},null==r?void 0:r.headers)}))}},{key:"retrieve",value:function(e,t,r){return this._client.get("/assistants/".concat(e,"/files/").concat(t),(0,a._)((0,s._)({},r),{headers:(0,s._)({"OpenAI-Beta":"assistants=v1"},null==r?void 0:r.headers)}))}},{key:"list",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return(0,h.isRequestOptions)(t)?this.list(e,{},t):this._client.getAPIList("/assistants/".concat(e,"/files"),_,(0,a._)((0,s._)({query:t},r),{headers:(0,s._)({"OpenAI-Beta":"assistants=v1"},null==r?void 0:r.headers)}))}},{key:"del",value:function(e,t,r){return this._client.delete("/assistants/".concat(e,"/files/").concat(t),(0,a._)((0,s._)({},r),{headers:(0,s._)({"OpenAI-Beta":"assistants=v1"},null==r?void 0:r.headers)}))}}]),o}(f.APIResource);e.exports.Files=y;var _=function(e){(0,i._)(n,e);var t=(0,u._)(n);function n(){return(0,r._)(this,n),t.apply(this,arguments)}return n}(d.CursorPage);e.exports.AssistantFilesPage=_,(y=e.exports.Files||(e.exports.Files={})).AssistantFilesPage=p.AssistantFilesPage}),i("cDGDk",function(e,t){var r=o("4GJKx"),n=o("dcsZi"),i=o("ohfOJ"),s=Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]},a=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Chat=void 0;var u=o("f8LhV"),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&s(t,e,r);return a(t,e),t}(o("jLVMY")),c=function(e){(0,n._)(o,e);var t=(0,i._)(o);function o(){var e;return(0,r._)(this,o),e=t.call.apply(t,[this].concat(Array.prototype.slice.call(arguments))),e.completions=new l.Completions(e._client),e}return o}(u.APIResource);e.exports.Chat=c,(c=e.exports.Chat||(e.exports.Chat={})).Completions=l.Completions}),i("jLVMY",function(e,t){var r=o("4GJKx"),n=o("1wc17"),i=o("dcsZi"),s=o("ohfOJ");Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Completions=e.exports.ChatCompletionStream=e.exports.ParsingToolFunction=e.exports.ParsingFunction=e.exports.ChatCompletionStreamingRunner=e.exports.ChatCompletionRunner=void 0;var a=o("f8LhV"),u=(o("asTG3"),o("asTG3"));Object.defineProperty(e.exports,"ChatCompletionRunner",{enumerable:!0,get:function(){return u.ChatCompletionRunner}});var l=(o("8Tva4"),o("8Tva4"));Object.defineProperty(e.exports,"ChatCompletionStreamingRunner",{enumerable:!0,get:function(){return l.ChatCompletionStreamingRunner}});var c=o("Ac3Lx");Object.defineProperty(e.exports,"ParsingFunction",{enumerable:!0,get:function(){return c.ParsingFunction}}),Object.defineProperty(e.exports,"ParsingToolFunction",{enumerable:!0,get:function(){return c.ParsingToolFunction}});var f=(o("4NCfc"),o("4NCfc"));Object.defineProperty(e.exports,"ChatCompletionStream",{enumerable:!0,get:function(){return f.ChatCompletionStream}});var h=function(e){(0,i._)(o,e);var t=(0,s._)(o);function o(){return(0,r._)(this,o),t.apply(this,arguments)}return(0,n._)(o,[{key:"runFunctions",value:function(e,t){return e.stream?l.ChatCompletionStreamingRunner.runFunctions(this._client.chat.completions,e,t):u.ChatCompletionRunner.runFunctions(this._client.chat.completions,e,t)}},{key:"runTools",value:function(e,t){return e.stream?l.ChatCompletionStreamingRunner.runTools(this._client.chat.completions,e,t):u.ChatCompletionRunner.runTools(this._client.chat.completions,e,t)}},{key:"stream",value:function(e,t){return f.ChatCompletionStream.createChatCompletion(this._client.chat.completions,e,t)}}]),o}(a.APIResource);e.exports.Completions=h}),i("asTG3",function(e,t){var r=o("4GJKx"),n=o("1wc17"),i=o("04RAu"),s=o("b8Rim"),a=o("dcsZi"),u=o("do9pw"),l=o("cxjpp"),c=o("ohfOJ");Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ChatCompletionRunner=void 0;var f=o("lN9FW"),h=o("eE4ON"),p=function(e){(0,a._)(o,e);var t=(0,c._)(o);function o(){return(0,r._)(this,o),t.apply(this,arguments)}return(0,n._)(o,[{key:"_addMessage",value:function(e){(0,i._)((0,s._)(o.prototype),"_addMessage",this).call(this,e),(0,h.isAssistantMessage)(e)&&e.content&&this._emit("content",e.content)}}],[{key:"runFunctions",value:function(e,t,r){var n=new o,i=(0,l._)((0,u._)({},r),{headers:(0,l._)((0,u._)({},null==r?void 0:r.headers),{"X-Stainless-Helper-Method":"runFunctions"})});return n._run(function(){return n._runFunctions(e,t,i)}),n}},{key:"runTools",value:function(e,t,r){var n=new o,i=(0,l._)((0,u._)({},r),{headers:(0,l._)((0,u._)({},null==r?void 0:r.headers),{"X-Stainless-Helper-Method":"runTools"})});return n._run(function(){return n._runTools(e,t,i)}),n}}]),o}(f.AbstractChatCompletionRunner);e.exports.ChatCompletionRunner=p}),i("lN9FW",function(e,t){var r,n,i,s,a,u,l,c,f,h,p,d,y,_,g,b,m,w,x,O,P=o("kSuI9"),A=o("4GJKx"),E=o("1wc17"),k=o("do9pw"),S=o("cxjpp"),R=o("dRLPW"),j=o("c6Xmf"),I=o("l0HdX"),C=o("l29cN"),M=function(e,t,r,n,o){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!o)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(e,r):o?o.value=r:t.set(e,r),r},F=function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.AbstractChatCompletionRunner=void 0;var T=o("huaPE"),B=o("Ac3Lx"),U=o("eE4ON"),L=function(){function e(){var t=this;(0,A._)(this,e),r.add(this),this.controller=new AbortController,n.set(this,void 0),i.set(this,function(){}),s.set(this,function(){}),a.set(this,void 0),u.set(this,function(){}),l.set(this,function(){}),c.set(this,{}),this._chatCompletions=[],this.messages=[],f.set(this,!1),h.set(this,!1),p.set(this,!1),d.set(this,!1),w.set(this,function(e){if(M(t,h,!0,"f"),e instanceof Error&&"AbortError"===e.name&&(e=new T.APIUserAbortError),e instanceof T.APIUserAbortError)return M(t,p,!0,"f"),t._emit("abort",e);if(e instanceof T.OpenAIError)return t._emit("error",e);if(e instanceof Error){var r=new T.OpenAIError(e.message);return r.cause=e,t._emit("error",r)}return t._emit("error",new T.OpenAIError(String(e)))}),M(this,n,new Promise(function(e,r){M(t,i,e,"f"),M(t,s,r,"f")}),"f"),M(this,a,new Promise(function(e,r){M(t,u,e,"f"),M(t,l,r,"f")}),"f"),F(this,n,"f").catch(function(){}),F(this,a,"f").catch(function(){})}return(0,E._)(e,[{key:"_run",value:function(e){var t=this;setTimeout(function(){e().then(function(){t._emitFinal(),t._emit("end")},F(t,w,"f"))},0)}},{key:"_addChatCompletion",value:function(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);var t,r=null===(t=e.choices[0])||void 0===t?void 0:t.message;return r&&this._addMessage(r),e}},{key:"_addMessage",value:function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if("content"in e||(e.content=null),this.messages.push(e),t){if(this._emit("message",e),((0,U.isFunctionMessage)(e)||(0,U.isToolMessage)(e))&&e.content)this._emit("functionCallResult",e.content);else if((0,U.isAssistantMessage)(e)&&e.function_call)this._emit("functionCall",e.function_call);else if((0,U.isAssistantMessage)(e)&&e.tool_calls){var r=!0,n=!1,o=void 0;try{for(var i,s=e.tool_calls[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var a=i.value;"function"===a.type&&this._emit("functionCall",a.function)}}catch(e){n=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(n)throw o}}}}}},{key:"_connected",value:function(){this.ended||(F(this,i,"f").call(this),this._emit("connect"))}},{key:"ended",get:function(){return F(this,f,"f")}},{key:"errored",get:function(){return F(this,h,"f")}},{key:"aborted",get:function(){return F(this,p,"f")}},{key:"abort",value:function(){this.controller.abort()}},{key:"on",value:function(e,t){return(F(this,c,"f")[e]||(F(this,c,"f")[e]=[])).push({listener:t}),this}},{key:"off",value:function(e,t){var r=F(this,c,"f")[e];if(!r)return this;var n=r.findIndex(function(e){return e.listener===t});return n>=0&&r.splice(n,1),this}},{key:"once",value:function(e,t){return(F(this,c,"f")[e]||(F(this,c,"f")[e]=[])).push({listener:t,once:!0}),this}},{key:"emitted",value:function(e){var t=this;return new Promise(function(r,n){M(t,d,!0,"f"),"error"!==e&&t.once("error",n),t.once(e,r)})}},{key:"done",value:function(){var e=this;return(0,P._)(function(){return(0,C.__generator)(this,function(t){switch(t.label){case 0:return M(e,d,!0,"f"),[4,F(e,a,"f")];case 1:return t.sent(),[2]}})})()}},{key:"finalChatCompletion",value:function(){var e=this;return(0,P._)(function(){var t;return(0,C.__generator)(this,function(r){switch(r.label){case 0:return[4,e.done()];case 1:if(r.sent(),!(t=e._chatCompletions[e._chatCompletions.length-1]))throw new T.OpenAIError("stream ended without producing a ChatCompletion");return[2,t]}})})()}},{key:"finalContent",value:function(){var e=this;return(0,P._)(function(){return(0,C.__generator)(this,function(t){switch(t.label){case 0:return[4,e.done()];case 1:return t.sent(),[2,F(e,r,"m",y).call(e)]}})})()}},{key:"finalMessage",value:function(){var e=this;return(0,P._)(function(){return(0,C.__generator)(this,function(t){switch(t.label){case 0:return[4,e.done()];case 1:return t.sent(),[2,F(e,r,"m",_).call(e)]}})})()}},{key:"finalFunctionCall",value:function(){var e=this;return(0,P._)(function(){return(0,C.__generator)(this,function(t){switch(t.label){case 0:return[4,e.done()];case 1:return t.sent(),[2,F(e,r,"m",g).call(e)]}})})()}},{key:"finalFunctionCallResult",value:function(){var e=this;return(0,P._)(function(){return(0,C.__generator)(this,function(t){switch(t.label){case 0:return[4,e.done()];case 1:return t.sent(),[2,F(e,r,"m",b).call(e)]}})})()}},{key:"totalUsage",value:function(){var e=this;return(0,P._)(function(){return(0,C.__generator)(this,function(t){switch(t.label){case 0:return[4,e.done()];case 1:return t.sent(),[2,F(e,r,"m",m).call(e)]}})})()}},{key:"allChatCompletions",value:function(){return(0,j._)(this._chatCompletions)}},{key:"_emit",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(!F(this,f,"f")){"end"===e&&(M(this,f,!0,"f"),F(this,u,"f").call(this));var o=F(this,c,"f")[e];if(o&&(F(this,c,"f")[e]=o.filter(function(e){return!e.once}),o.forEach(function(e){return e.listener.apply(void 0,(0,j._)(r))})),"abort"===e){var i=r[0];F(this,d,"f")||(null==o?void 0:o.length)||Promise.reject(i),F(this,s,"f").call(this,i),F(this,l,"f").call(this,i),this._emit("end");return}if("error"===e){var a=r[0];F(this,d,"f")||(null==o?void 0:o.length)||Promise.reject(a),F(this,s,"f").call(this,a),F(this,l,"f").call(this,a),this._emit("end")}}}},{key:"_emitFinal",value:function(){var e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);var t=F(this,r,"m",_).call(this);t&&this._emit("finalMessage",t);var n=F(this,r,"m",y).call(this);n&&this._emit("finalContent",n);var o=F(this,r,"m",g).call(this);o&&this._emit("finalFunctionCall",o);var i=F(this,r,"m",b).call(this);null!=i&&this._emit("finalFunctionCallResult",i),this._chatCompletions.some(function(e){return e.usage})&&this._emit("totalUsage",F(this,r,"m",m).call(this))}},{key:"_createChatCompletion",value:function(e,t,n){var o=this;return(0,P._)(function(){var i,s;return(0,C.__generator)(this,function(a){switch(a.label){case 0:return(i=null==n?void 0:n.signal)&&(i.aborted&&o.controller.abort(),i.addEventListener("abort",function(){return o.controller.abort()})),F(o,r,"m",x).call(o,t),[4,e.create((0,S._)((0,k._)({},t),{stream:!1}),(0,S._)((0,k._)({},n),{signal:o.controller.signal}))];case 1:return s=a.sent(),o._connected(),[2,o._addChatCompletion(s)]}})})()}},{key:"_runChatCompletion",value:function(e,t,r){var n=this;return(0,P._)(function(){var o,i,s,a,u,l;return(0,C.__generator)(this,function(c){switch(c.label){case 0:o=!0,i=!1,s=void 0;try{for(a=t.messages[Symbol.iterator]();!(o=(u=a.next()).done);o=!0)l=u.value,n._addMessage(l,!1)}catch(e){i=!0,s=e}finally{try{o||null==a.return||a.return()}finally{if(i)throw s}}return[4,n._createChatCompletion(e,t,r)];case 1:return[2,c.sent()]}})})()}},{key:"_runFunctions",value:function(e,t,n){var o=this;return(0,P._)(function(){var i,s,a,u,l,c,f,h,p,d,y,_,g,b,m,w,x,P,A,E,I,M,U,L,N,W,D,J,q,G,H,z,V,X,K;return(0,C.__generator)(this,function(C){switch(C.label){case 0:i="function",a=void 0===(s=t.function_call)?"auto":s,t.stream,u=(0,R._)(t,["function_call","stream"]),l="string"!=typeof a&&(null==a?void 0:a.name),f=void 0===(c=(n||{}).maxChatCompletions)?10:c,h={},p=!0,d=!1,y=void 0;try{for(_=t.functions[Symbol.iterator]();!(p=(g=_.next()).done);p=!0)h[(b=g.value).name||b.function.name]=b}catch(e){d=!0,y=e}finally{try{p||null==_.return||_.return()}finally{if(d)throw y}}m=t.functions.map(function(e){return{name:e.name||e.function.name,parameters:e.parameters,description:e.description}}),w=!0,x=!1,P=void 0;try{for(A=t.messages[Symbol.iterator]();!(w=(E=A.next()).done);w=!0)I=E.value,o._addMessage(I,!1)}catch(e){x=!0,P=e}finally{try{w||null==A.return||A.return()}finally{if(x)throw P}}M=0,C.label=1;case 1:if(!(M<f))return[3,11];return[4,o._createChatCompletion(e,(0,S._)((0,k._)({},u),{function_call:a,functions:m,messages:(0,j._)(o.messages)}),n)];case 2:if(!(L=null===(U=C.sent().choices[0])||void 0===U?void 0:U.message))throw new T.OpenAIError("missing message in ChatCompletion response");if(!L.function_call)return[2];if(W=(N=L.function_call).name,D=N.arguments,!(J=h[W]))return q="Invalid function_call: ".concat(JSON.stringify(W),". Available options are: ").concat(m.map(function(e){return JSON.stringify(e.name)}).join(", "),". Please try again"),o._addMessage({role:i,name:W,content:q}),[3,10];if(l&&l!==W)return G="Invalid function_call: ".concat(JSON.stringify(W),". ").concat(JSON.stringify(l)," requested. Please try again"),o._addMessage({role:i,name:W,content:G}),[3,10];H=void 0,C.label=3;case 3:if(C.trys.push([3,7,,8]),!(0,B.isRunnableFunctionWithParse)(J))return[3,5];return[4,J.parse(D)];case 4:return z=C.sent(),[3,6];case 5:z=D,C.label=6;case 6:return H=z,[3,8];case 7:return V=C.sent(),o._addMessage({role:i,name:W,content:V instanceof Error?V.message:String(V)}),[3,10];case 8:return[4,J.function(H,o)];case 9:if(X=C.sent(),K=F(o,r,"m",O).call(o,X),o._addMessage({role:i,name:W,content:K}),l)return[2];C.label=10;case 10:return++M,[3,1];case 11:return[2]}})})()}},{key:"_runTools",value:function(e,t,n){var o=this;return(0,P._)(function(){var i,s,a,u,l,c,f,h,p,d,y,_,g,b,m,w,x,P,A,E,I,M,U,L,N,W,D,J,q,G,H,z,V,X,K,Z,Y,Q,$,ee,et,er,en,eo,ei;return(0,C.__generator)(this,function(C){switch(C.label){case 0:s="tool",u=void 0===(a=t.tool_choice)?"auto":a,t.stream,l=(0,R._)(t,["tool_choice","stream"]),c="string"!=typeof u&&(null==u?void 0:null===(i=u.function)||void 0===i?void 0:i.name),h=void 0===(f=(n||{}).maxChatCompletions)?10:f,p={},d=!0,y=!1,_=void 0;try{for(g=t.tools[Symbol.iterator]();!(d=(b=g.next()).done);d=!0)m=b.value,"function"===m.type&&(p[m.function.name||m.function.function.name]=m.function)}catch(e){y=!0,_=e}finally{try{d||null==g.return||g.return()}finally{if(y)throw _}}w="tools"in t?t.tools.map(function(e){return"function"===e.type?{type:"function",function:{name:e.function.name||e.function.function.name,parameters:e.function.parameters,description:e.function.description}}:e}):void 0,x=!0,P=!1,A=void 0;try{for(E=t.messages[Symbol.iterator]();!(x=(I=E.next()).done);x=!0)M=I.value,o._addMessage(M,!1)}catch(e){P=!0,A=e}finally{try{x||null==E.return||E.return()}finally{if(P)throw A}}U=0,C.label=1;case 1:if(!(U<h))return[3,17];return[4,o._createChatCompletion(e,(0,S._)((0,k._)({},l),{tool_choice:u,tools:w,messages:(0,j._)(o.messages)}),n)];case 2:if(!(N=null===(L=C.sent().choices[0])||void 0===L?void 0:L.message))throw new T.OpenAIError("missing message in ChatCompletion response");if(!N.tool_calls)return[2];W=!0,D=!1,J=void 0,C.label=3;case 3:C.trys.push([3,14,15,16]),q=N.tool_calls[Symbol.iterator](),C.label=4;case 4:if(W=(G=q.next()).done)return[3,13];if("function"!==(H=G.value).type)return[3,12];if(z=H.id,X=(V=H.function).name,K=V.arguments,!(Z=p[X]))return Y="Invalid tool_call: ".concat(JSON.stringify(X),". Available options are: ").concat(w.map(function(e){return JSON.stringify(e.function.name)}).join(", "),". Please try again"),o._addMessage({role:s,tool_call_id:z,content:Y}),[3,12];if(c&&c!==X)return Q="Invalid tool_call: ".concat(JSON.stringify(X),". ").concat(JSON.stringify(c)," requested. Please try again"),o._addMessage({role:s,tool_call_id:z,content:Q}),[3,12];$=void 0,C.label=5;case 5:if(C.trys.push([5,9,,10]),!(0,B.isRunnableFunctionWithParse)(Z))return[3,7];return[4,Z.parse(K)];case 6:return ee=C.sent(),[3,8];case 7:ee=K,C.label=8;case 8:return $=ee,[3,10];case 9:return er=(et=C.sent())instanceof Error?et.message:String(et),o._addMessage({role:s,tool_call_id:z,content:er}),[3,12];case 10:return[4,Z.function($,o)];case 11:if(en=C.sent(),eo=F(o,r,"m",O).call(o,en),o._addMessage({role:s,tool_call_id:z,content:eo}),c)return[2];C.label=12;case 12:return W=!0,[3,4];case 13:return[3,16];case 14:return ei=C.sent(),D=!0,J=ei,[3,16];case 15:try{W||null==q.return||q.return()}finally{if(D)throw J}return[7];case 16:return++U,[3,1];case 17:return[2]}})})()}}]),e}();e.exports.AbstractChatCompletionRunner=L,n=new WeakMap,i=new WeakMap,s=new WeakMap,a=new WeakMap,u=new WeakMap,l=new WeakMap,c=new WeakMap,f=new WeakMap,h=new WeakMap,p=new WeakMap,d=new WeakMap,w=new WeakMap,r=new WeakSet,y=function(){var e;return null!==(e=F(this,r,"m",_).call(this).content)&&void 0!==e?e:null},_=function(){for(var e=this.messages.length;e-- >0;){var t,r=this.messages[e];if((0,U.isAssistantMessage)(r))return(0,S._)((0,k._)({},r),{content:null!==(t=r.content)&&void 0!==t?t:null})}throw new T.OpenAIError("stream ended without producing a ChatCompletionMessage with role=assistant")},g=function(){for(var e=this.messages.length-1;e>=0;e--){var t,r,n=this.messages[e];if((0,U.isAssistantMessage)(n)&&(null==n?void 0:n.function_call))return n.function_call;if((0,U.isAssistantMessage)(n)&&(null==n?void 0:null===(t=n.tool_calls)||void 0===t?void 0:t.length))return null===(r=n.tool_calls.at(-1))||void 0===r?void 0:r.function}},b=function(){for(var e=this,t=this.messages.length-1;t>=0;t--){var r=function(t){var r=e.messages[t];if((0,U.isFunctionMessage)(r)&&null!=r.content||(0,U.isToolMessage)(r)&&null!=r.content&&e.messages.some(function(e){var t;return"assistant"===e.role&&(null===(t=e.tool_calls)||void 0===t?void 0:t.some(function(e){return"function"===e.type&&e.id===r.tool_call_id}))}))return{v:r.content}}(t);if("object"===(0,I._)(r))return r.v}},m=function(){var e={completion_tokens:0,prompt_tokens:0,total_tokens:0},t=!0,r=!1,n=void 0;try{for(var o,i=this._chatCompletions[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var s=o.value.usage;s&&(e.completion_tokens+=s.completion_tokens,e.prompt_tokens+=s.prompt_tokens,e.total_tokens+=s.total_tokens)}}catch(e){r=!0,n=e}finally{try{t||null==i.return||i.return()}finally{if(r)throw n}}return e},x=function(e){if(null!=e.n&&e.n>1)throw new T.OpenAIError("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},O=function(e){return"string"==typeof e?e:void 0===e?"undefined":JSON.stringify(e)}}),i("Ac3Lx",function(e,t){var r=o("4GJKx");Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ParsingToolFunction=e.exports.ParsingFunction=e.exports.isRunnableFunctionWithParse=void 0,e.exports.isRunnableFunctionWithParse=function(e){return"function"==typeof e.parse},e.exports.ParsingFunction=function e(t){(0,r._)(this,e),this.function=t.function,this.parse=t.parse,this.parameters=t.parameters,this.description=t.description,this.name=t.name},e.exports.ParsingToolFunction=function e(t){(0,r._)(this,e),this.type="function",this.function=t}}),i("eE4ON",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.isPresent=e.exports.isToolMessage=e.exports.isFunctionMessage=e.exports.isAssistantMessage=void 0,e.exports.isAssistantMessage=function(e){return(null==e?void 0:e.role)==="assistant"},e.exports.isFunctionMessage=function(e){return(null==e?void 0:e.role)==="function"},e.exports.isToolMessage=function(e){return(null==e?void 0:e.role)==="tool"},e.exports.isPresent=function(e){return null!=e}}),i("8Tva4",function(e,t){var r=o("4GJKx"),n=o("1wc17"),i=o("dcsZi"),s=o("do9pw"),a=o("cxjpp"),u=o("ohfOJ");Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ChatCompletionStreamingRunner=void 0;var l=function(e){(0,i._)(o,e);var t=(0,u._)(o);function o(){return(0,r._)(this,o),t.apply(this,arguments)}return(0,n._)(o,null,[{key:"fromReadableStream",value:function(e){var t=new o;return t._run(function(){return t._fromReadableStream(e)}),t}},{key:"runFunctions",value:function(e,t,r){var n=new o,i=(0,a._)((0,s._)({},r),{headers:(0,a._)((0,s._)({},null==r?void 0:r.headers),{"X-Stainless-Helper-Method":"runFunctions"})});return n._run(function(){return n._runFunctions(e,t,i)}),n}},{key:"runTools",value:function(e,t,r){var n=new o,i=(0,a._)((0,s._)({},r),{headers:(0,a._)((0,s._)({},null==r?void 0:r.headers),{"X-Stainless-Helper-Method":"runTools"})});return n._run(function(){return n._runTools(e,t,i)}),n}}]),o}(o("4NCfc").ChatCompletionStream);e.exports.ChatCompletionStreamingRunner=l}),i("4NCfc",function(e,t){var r,n,i,s,a,u,l=o("d3H5E"),c=o("hcCmL"),f=o("kSuI9"),h=o("4GJKx"),p=o("1wc17"),d=o("dcsZi"),y=o("do9pw"),_=o("cxjpp"),g=o("dRLPW"),b=o("c6Xmf"),m=o("ohfOJ"),w=o("l29cN"),x=function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},O=function(e,t,r,n,o){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!o)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(e,r):o?o.value=r:t.set(e,r),r};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ChatCompletionStream=void 0;var P=o("huaPE"),A=o("lN9FW"),E=o("erIW1"),k=function(e){(0,d._)(o,e);var t=(0,m._)(o);function o(){var e;return(0,h._)(this,o),e=t.call.apply(t,[this].concat(Array.prototype.slice.call(arguments))),r.add((0,l._)(e)),n.set((0,l._)(e),void 0),e}return(0,p._)(o,[{key:"currentChatCompletionSnapshot",get:function(){return x(this,n,"f")}},{key:"_createChatCompletion",value:function(e,t,n){var o=this;return(0,f._)(function(){var u,l,f,h,p,d,g,b,m,O;return(0,w.__generator)(this,function(w){switch(w.label){case 0:return(l=null==n?void 0:n.signal)&&(l.aborted&&o.controller.abort(),l.addEventListener("abort",function(){return o.controller.abort()})),x(o,r,"m",i).call(o),[4,e.create((0,_._)((0,y._)({},t),{stream:!0}),(0,_._)((0,y._)({},n),{signal:o.controller.signal}))];case 1:f=w.sent(),o._connected(),h=!1,p=!1,w.label=2;case 2:w.trys.push([2,7,8,13]),g=(0,c._)(f),w.label=3;case 3:return[4,g.next()];case 4:if(!(h=!(b=w.sent()).done))return[3,6];m=b.value,x(o,r,"m",s).call(o,m),w.label=5;case 5:return h=!1,[3,3];case 6:return[3,13];case 7:return O=w.sent(),p=!0,d=O,[3,13];case 8:if(w.trys.push([8,,11,12]),!(h&&null!=g.return))return[3,10];return[4,g.return()];case 9:w.sent(),w.label=10;case 10:return[3,12];case 11:if(p)throw d;return[7];case 12:return[7];case 13:if(null===(u=f.controller.signal)||void 0===u?void 0:u.aborted)throw new P.APIUserAbortError;return[2,o._addChatCompletion(x(o,r,"m",a).call(o))]}})})()}},{key:"_fromReadableStream",value:function(e,t){var n=this;return(0,f._)(function(){var o,u,l,f,h,p,d,y,_,g,b;return(0,w.__generator)(this,function(m){switch(m.label){case 0:(u=null==t?void 0:t.signal)&&(u.aborted&&n.controller.abort(),u.addEventListener("abort",function(){return n.controller.abort()})),x(n,r,"m",i).call(n),n._connected(),l=E.Stream.fromReadableStream(e,n.controller),h=!1,p=!1,m.label=1;case 1:m.trys.push([1,6,7,12]),y=(0,c._)(l),m.label=2;case 2:return[4,y.next()];case 3:if(!(h=!(_=m.sent()).done))return[3,5];g=_.value,f&&f!==g.id&&n._addChatCompletion(x(n,r,"m",a).call(n)),x(n,r,"m",s).call(n,g),f=g.id,m.label=4;case 4:return h=!1,[3,2];case 5:return[3,12];case 6:return b=m.sent(),p=!0,d=b,[3,12];case 7:if(m.trys.push([7,,10,11]),!(h&&null!=y.return))return[3,9];return[4,y.return()];case 8:m.sent(),m.label=9;case 9:return[3,11];case 10:if(p)throw d;return[7];case 11:return[7];case 12:if(null===(o=l.controller.signal)||void 0===o?void 0:o.aborted)throw new P.APIUserAbortError;return[2,n._addChatCompletion(x(n,r,"m",a).call(n))]}})})()}},{key:(n=new WeakMap,r=new WeakSet,i=function(){this.ended||O(this,n,void 0,"f")},s=function(e){if(!this.ended){var t,n,o,i=x(this,r,"m",u).call(this,e);this._emit("chunk",e,i);var s=null===(n=e.choices[0])||void 0===n?void 0:null===(t=n.delta)||void 0===t?void 0:t.content,a=null===(o=i.choices[0])||void 0===o?void 0:o.message;null!=s&&(null==a?void 0:a.role)==="assistant"&&(null==a?void 0:a.content)&&this._emit("content",s,a.content)}},a=function(){if(this.ended)throw new P.OpenAIError("stream has ended, this shouldn't happen");var e,t,r,o,i,s,a=x(this,n,"f");if(!a)throw new P.OpenAIError("request ended without sending any chunks");return O(this,n,void 0,"f"),e=a.id,t=a.choices,r=a.created,o=a.model,i=a.system_fingerprint,s=(0,g._)(a,["id","choices","created","model","system_fingerprint"]),(0,y._)((0,_._)((0,y._)({},s),{id:e,choices:t.map(function(e){var t=e.message,r=e.finish_reason,n=e.index,o=e.logprobs,i=(0,g._)(e,["message","finish_reason","index","logprobs"]);if(!r)throw new P.OpenAIError("missing finish_reason for choice ".concat(n));var s=t.content,u=void 0===s?null:s,l=t.function_call,c=t.tool_calls,f=(0,g._)(t,["content","function_call","tool_calls"]),h=t.role;if(!h)throw new P.OpenAIError("missing role for choice ".concat(n));if(l){var p=l.arguments,d=l.name;if(null==p)throw new P.OpenAIError("missing function_call.arguments for choice ".concat(n));if(!d)throw new P.OpenAIError("missing function_call.name for choice ".concat(n));return(0,_._)((0,y._)({},i),{message:{content:u,function_call:{arguments:p,name:d},role:h},finish_reason:r,index:n,logprobs:o})}return c?(0,_._)((0,y._)({},i),{index:n,finish_reason:r,logprobs:o,message:(0,_._)((0,y._)({},f),{role:h,content:u,tool_calls:c.map(function(e,t){var r=e.function,o=e.type,i=e.id,s=(0,g._)(e,["function","type","id"]),u=r||{},l=u.arguments,c=u.name,f=(0,g._)(u,["arguments","name"]);if(null==i)throw new P.OpenAIError("missing choices[".concat(n,"].tool_calls[").concat(t,"].id\n").concat(S(a)));if(null==o)throw new P.OpenAIError("missing choices[".concat(n,"].tool_calls[").concat(t,"].type\n").concat(S(a)));if(null==c)throw new P.OpenAIError("missing choices[".concat(n,"].tool_calls[").concat(t,"].function.name\n").concat(S(a)));if(null==l)throw new P.OpenAIError("missing choices[".concat(n,"].tool_calls[").concat(t,"].function.arguments\n").concat(S(a)));return(0,_._)((0,y._)({},s),{id:i,type:o,function:(0,_._)((0,y._)({},f),{name:c,arguments:l})})})})}):(0,_._)((0,y._)({},i),{message:(0,_._)((0,y._)({},f),{content:u,role:h}),finish_reason:r,index:n,logprobs:o})}),created:r,model:o,object:"chat.completion"}),i?{system_fingerprint:i}:{})},u=function(e){var t=x(this,n,"f");e.choices;var r=(0,g._)(e,["choices"]);t?Object.assign(t,r):t=O(this,n,(0,_._)((0,y._)({},r),{choices:[]}),"f");var o=!0,i=!1,s=void 0;try{for(var a,u,l,c,f=e.choices[Symbol.iterator]();!(o=(c=f.next()).done);o=!0){var h=c.value,p=h.delta,d=h.finish_reason,m=h.index,w=h.logprobs,P=void 0===w?null:w,A=(0,g._)(h,["delta","finish_reason","index","logprobs"]),E=t.choices[m];if(E||(E=t.choices[m]=(0,y._)({finish_reason:d,index:m,message:{},logprobs:P},A)),P){if(E.logprobs){var k,S,R=P.content,j=(0,g._)(P,["content"]);Object.assign(E.logprobs,j),R&&(null!==(S=(a=E.logprobs).content)&&void 0!==S||(a.content=[]),(k=E.logprobs.content).push.apply(k,(0,b._)(R)))}else E.logprobs=Object.assign({},P)}if(d&&(E.finish_reason=d),Object.assign(E,A),p){var I=p.content,C=p.function_call,M=p.role,F=p.tool_calls,T=(0,g._)(p,["content","function_call","role","tool_calls"]);if(Object.assign(E.message,T),I&&(E.message.content=(E.message.content||"")+I),M&&(E.message.role=M),C&&(E.message.function_call?(C.name&&(E.message.function_call.name=C.name),C.arguments&&(null!==(N=(u=E.message.function_call).arguments)&&void 0!==N||(u.arguments=""),E.message.function_call.arguments+=C.arguments)):E.message.function_call=C),F){E.message.tool_calls||(E.message.tool_calls=[]);var B=!0,U=!1,L=void 0;try{for(var N,W,D=F[Symbol.iterator]();!(B=(W=D.next()).done);B=!0){var J,q,G=W.value,H=G.index,z=G.id,V=G.type,X=G.function,K=(0,g._)(G,["index","id","type","function"]),Z=null!==(J=(l=E.message.tool_calls)[H])&&void 0!==J?J:l[H]={};Object.assign(Z,K),z&&(Z.id=z),V&&(Z.type=V),X&&(null!==(q=Z.function)&&void 0!==q||(Z.function={arguments:""})),(null==X?void 0:X.name)&&(Z.function.name=X.name),(null==X?void 0:X.arguments)&&(Z.function.arguments+=X.arguments)}}catch(e){U=!0,L=e}finally{try{B||null==D.return||D.return()}finally{if(U)throw L}}}}}}catch(e){i=!0,s=e}finally{try{o||null==f.return||f.return()}finally{if(i)throw s}}return t},Symbol.asyncIterator),value:function(){var e=[],t=[],r=!1;return this.on("chunk",function(r){var n=t.shift();n?n(r):e.push(r)}),this.on("end",function(){r=!0;var e=!0,n=!1,o=void 0;try{for(var i,s=t[Symbol.iterator]();!(e=(i=s.next()).done);e=!0)(0,i.value)(void 0)}catch(e){n=!0,o=e}finally{try{e||null==s.return||s.return()}finally{if(n)throw o}}t.length=0}),{next:(0,f._)(function(){return(0,w.__generator)(this,function(n){return e.length?[2,{value:e.shift(),done:!1}]:r?[2,{value:void 0,done:!0}]:[2,new Promise(function(e){return t.push(e)}).then(function(e){return e?{value:e,done:!1}:{value:void 0,done:!0}})]})})}}},{key:"toReadableStream",value:function(){return new E.Stream(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}],[{key:"fromReadableStream",value:function(e){var t=new o;return t._run(function(){return t._fromReadableStream(e)}),t}},{key:"createChatCompletion",value:function(e,t,r){var n=new o;return n._run(function(){return n._runChatCompletion(e,(0,_._)((0,y._)({},t),{stream:!0}),(0,_._)((0,y._)({},r),{headers:(0,_._)((0,y._)({},null==r?void 0:r.headers),{"X-Stainless-Helper-Method":"stream"})}))}),n}}]),o}(A.AbstractChatCompletionRunner);function S(e){return JSON.stringify(e)}e.exports.ChatCompletionStream=k}),i("foR0V",function(e,t){var r,n=o("4GJKx"),i=o("1wc17"),s=o("dcsZi"),a=o("do9pw"),u=o("cxjpp"),l=o("ohfOJ"),c=Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]},f=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&c(t,e,r);return f(t,e),t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Threads=void 0;var p=o("f8LhV"),d=o("cGp6U"),y=h(o("dNMVk")),_=h(o("E9SGS")),g=function(e){(0,s._)(r,e);var t=(0,l._)(r);function r(){var e;return(0,n._)(this,r),e=t.call.apply(t,[this].concat(Array.prototype.slice.call(arguments))),e.runs=new _.Runs(e._client),e.messages=new y.Messages(e._client),e}return(0,i._)(r,[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return(0,d.isRequestOptions)(e)?this.create({},e):this._client.post("/threads",(0,u._)((0,a._)({body:e},t),{headers:(0,a._)({"OpenAI-Beta":"assistants=v1"},null==t?void 0:t.headers)}))}},{key:"retrieve",value:function(e,t){return this._client.get("/threads/".concat(e),(0,u._)((0,a._)({},t),{headers:(0,a._)({"OpenAI-Beta":"assistants=v1"},null==t?void 0:t.headers)}))}},{key:"update",value:function(e,t,r){return this._client.post("/threads/".concat(e),(0,u._)((0,a._)({body:t},r),{headers:(0,a._)({"OpenAI-Beta":"assistants=v1"},null==r?void 0:r.headers)}))}},{key:"del",value:function(e,t){return this._client.delete("/threads/".concat(e),(0,u._)((0,a._)({},t),{headers:(0,a._)({"OpenAI-Beta":"assistants=v1"},null==t?void 0:t.headers)}))}},{key:"createAndRun",value:function(e,t){return this._client.post("/threads/runs",(0,u._)((0,a._)({body:e},t),{headers:(0,a._)({"OpenAI-Beta":"assistants=v1"},null==t?void 0:t.headers)}))}}]),r}(p.APIResource);e.exports.Threads=g,(r=g=e.exports.Threads||(e.exports.Threads={})).Runs=_.Runs,r.RunsPage=_.RunsPage,r.Messages=y.Messages,r.ThreadMessagesPage=y.ThreadMessagesPage}),i("dNMVk",function(e,t){var r,n=o("4GJKx"),i=o("1wc17"),s=o("dcsZi"),a=o("do9pw"),u=o("cxjpp"),l=o("ohfOJ"),c=Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]},f=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&c(t,e,r);return f(t,e),t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ThreadMessagesPage=e.exports.Messages=void 0;var p=o("f8LhV"),d=o("cGp6U"),y=h(e.exports),_=h(o("gOEHh")),g=o("5kUHX"),b=function(e){(0,s._)(r,e);var t=(0,l._)(r);function r(){var e;return(0,n._)(this,r),e=t.call.apply(t,[this].concat(Array.prototype.slice.call(arguments))),e.files=new _.Files(e._client),e}return(0,i._)(r,[{key:"create",value:function(e,t,r){return this._client.post("/threads/".concat(e,"/messages"),(0,u._)((0,a._)({body:t},r),{headers:(0,a._)({"OpenAI-Beta":"assistants=v1"},null==r?void 0:r.headers)}))}},{key:"retrieve",value:function(e,t,r){return this._client.get("/threads/".concat(e,"/messages/").concat(t),(0,u._)((0,a._)({},r),{headers:(0,a._)({"OpenAI-Beta":"assistants=v1"},null==r?void 0:r.headers)}))}},{key:"update",value:function(e,t,r,n){return this._client.post("/threads/".concat(e,"/messages/").concat(t),(0,u._)((0,a._)({body:r},n),{headers:(0,a._)({"OpenAI-Beta":"assistants=v1"},null==n?void 0:n.headers)}))}},{key:"list",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return(0,d.isRequestOptions)(t)?this.list(e,{},t):this._client.getAPIList("/threads/".concat(e,"/messages"),m,(0,u._)((0,a._)({query:t},r),{headers:(0,a._)({"OpenAI-Beta":"assistants=v1"},null==r?void 0:r.headers)}))}}]),r}(p.APIResource);e.exports.Messages=b;var m=function(e){(0,s._)(r,e);var t=(0,l._)(r);function r(){return(0,n._)(this,r),t.apply(this,arguments)}return r}(g.CursorPage);e.exports.ThreadMessagesPage=m,(r=b=e.exports.Messages||(e.exports.Messages={})).ThreadMessagesPage=y.ThreadMessagesPage,r.Files=_.Files,r.MessageFilesPage=_.MessageFilesPage}),i("gOEHh",function(e,t){var r=o("4GJKx"),n=o("1wc17"),i=o("dcsZi"),s=o("do9pw"),a=o("cxjpp"),u=o("ohfOJ"),l=Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]},c=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.MessageFilesPage=e.exports.Files=void 0;var f=o("f8LhV"),h=o("cGp6U"),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&l(t,e,r);return c(t,e),t}(e.exports),d=o("5kUHX"),y=function(e){(0,i._)(o,e);var t=(0,u._)(o);function o(){return(0,r._)(this,o),t.apply(this,arguments)}return(0,n._)(o,[{key:"retrieve",value:function(e,t,r,n){return this._client.get("/threads/".concat(e,"/messages/").concat(t,"/files/").concat(r),(0,a._)((0,s._)({},n),{headers:(0,s._)({"OpenAI-Beta":"assistants=v1"},null==n?void 0:n.headers)}))}},{key:"list",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0;return(0,h.isRequestOptions)(r)?this.list(e,t,{},r):this._client.getAPIList("/threads/".concat(e,"/messages/").concat(t,"/files"),_,(0,a._)((0,s._)({query:r},n),{headers:(0,s._)({"OpenAI-Beta":"assistants=v1"},null==n?void 0:n.headers)}))}}]),o}(f.APIResource);e.exports.Files=y;var _=function(e){(0,i._)(n,e);var t=(0,u._)(n);function n(){return(0,r._)(this,n),t.apply(this,arguments)}return n}(d.CursorPage);e.exports.MessageFilesPage=_,(y=e.exports.Files||(e.exports.Files={})).MessageFilesPage=p.MessageFilesPage}),i("E9SGS",function(e,t){var r,n=o("4GJKx"),i=o("1wc17"),s=o("dcsZi"),a=o("do9pw"),u=o("cxjpp"),l=o("ohfOJ"),c=Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]},f=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&c(t,e,r);return f(t,e),t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.RunsPage=e.exports.Runs=void 0;var p=o("f8LhV"),d=o("cGp6U"),y=h(e.exports),_=h(o("6HwYD")),g=o("5kUHX"),b=function(e){(0,s._)(r,e);var t=(0,l._)(r);function r(){var e;return(0,n._)(this,r),e=t.call.apply(t,[this].concat(Array.prototype.slice.call(arguments))),e.steps=new _.Steps(e._client),e}return(0,i._)(r,[{key:"create",value:function(e,t,r){return this._client.post("/threads/".concat(e,"/runs"),(0,u._)((0,a._)({body:t},r),{headers:(0,a._)({"OpenAI-Beta":"assistants=v1"},null==r?void 0:r.headers)}))}},{key:"retrieve",value:function(e,t,r){return this._client.get("/threads/".concat(e,"/runs/").concat(t),(0,u._)((0,a._)({},r),{headers:(0,a._)({"OpenAI-Beta":"assistants=v1"},null==r?void 0:r.headers)}))}},{key:"update",value:function(e,t,r,n){return this._client.post("/threads/".concat(e,"/runs/").concat(t),(0,u._)((0,a._)({body:r},n),{headers:(0,a._)({"OpenAI-Beta":"assistants=v1"},null==n?void 0:n.headers)}))}},{key:"list",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return(0,d.isRequestOptions)(t)?this.list(e,{},t):this._client.getAPIList("/threads/".concat(e,"/runs"),m,(0,u._)((0,a._)({query:t},r),{headers:(0,a._)({"OpenAI-Beta":"assistants=v1"},null==r?void 0:r.headers)}))}},{key:"cancel",value:function(e,t,r){return this._client.post("/threads/".concat(e,"/runs/").concat(t,"/cancel"),(0,u._)((0,a._)({},r),{headers:(0,a._)({"OpenAI-Beta":"assistants=v1"},null==r?void 0:r.headers)}))}},{key:"submitToolOutputs",value:function(e,t,r,n){return this._client.post("/threads/".concat(e,"/runs/").concat(t,"/submit_tool_outputs"),(0,u._)((0,a._)({body:r},n),{headers:(0,a._)({"OpenAI-Beta":"assistants=v1"},null==n?void 0:n.headers)}))}}]),r}(p.APIResource);e.exports.Runs=b;var m=function(e){(0,s._)(r,e);var t=(0,l._)(r);function r(){return(0,n._)(this,r),t.apply(this,arguments)}return r}(g.CursorPage);e.exports.RunsPage=m,(r=b=e.exports.Runs||(e.exports.Runs={})).RunsPage=y.RunsPage,r.Steps=_.Steps,r.RunStepsPage=_.RunStepsPage}),i("6HwYD",function(e,t){var r=o("4GJKx"),n=o("1wc17"),i=o("dcsZi"),s=o("do9pw"),a=o("cxjpp"),u=o("ohfOJ"),l=Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]},c=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.RunStepsPage=e.exports.Steps=void 0;var f=o("f8LhV"),h=o("cGp6U"),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&l(t,e,r);return c(t,e),t}(e.exports),d=o("5kUHX"),y=function(e){(0,i._)(o,e);var t=(0,u._)(o);function o(){return(0,r._)(this,o),t.apply(this,arguments)}return(0,n._)(o,[{key:"retrieve",value:function(e,t,r,n){return this._client.get("/threads/".concat(e,"/runs/").concat(t,"/steps/").concat(r),(0,a._)((0,s._)({},n),{headers:(0,s._)({"OpenAI-Beta":"assistants=v1"},null==n?void 0:n.headers)}))}},{key:"list",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0;return(0,h.isRequestOptions)(r)?this.list(e,t,{},r):this._client.getAPIList("/threads/".concat(e,"/runs/").concat(t,"/steps"),_,(0,a._)((0,s._)({query:r},n),{headers:(0,s._)({"OpenAI-Beta":"assistants=v1"},null==n?void 0:n.headers)}))}}]),o}(f.APIResource);e.exports.Steps=y;var _=function(e){(0,i._)(n,e);var t=(0,u._)(n);function n(){return(0,r._)(this,n),t.apply(this,arguments)}return n}(d.CursorPage);e.exports.RunStepsPage=_,(y=e.exports.Steps||(e.exports.Steps={})).RunStepsPage=p.RunStepsPage}),i("gzpi9",function(e,t){var r=o("4GJKx"),n=o("1wc17"),i=o("dcsZi"),s=o("do9pw"),a=o("cxjpp"),u=o("ohfOJ");Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Completions=void 0;var l=function(e){(0,i._)(o,e);var t=(0,u._)(o);function o(){return(0,r._)(this,o),t.apply(this,arguments)}return(0,n._)(o,[{key:"create",value:function(e,t){var r;return this._client.post("/completions",(0,a._)((0,s._)({body:e},t),{stream:null!==(r=e.stream)&&void 0!==r&&r}))}}]),o}(o("f8LhV").APIResource);e.exports.Completions=l,e.exports.Completions||(e.exports.Completions={})}),i("cu85Q",function(e,t){var r=o("4GJKx"),n=o("1wc17"),i=o("dcsZi"),s=o("do9pw"),a=o("ohfOJ");Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Embeddings=void 0;var u=function(e){(0,i._)(o,e);var t=(0,a._)(o);function o(){return(0,r._)(this,o),t.apply(this,arguments)}return(0,n._)(o,[{key:"create",value:function(e,t){return this._client.post("/embeddings",(0,s._)({body:e},t))}}]),o}(o("f8LhV").APIResource);e.exports.Embeddings=u,e.exports.Embeddings||(e.exports.Embeddings={})}),i("bsBYs",function(e,t){var r=o("kSuI9"),n=o("4GJKx"),i=o("1wc17"),s=o("dcsZi"),a=o("do9pw"),u=o("cxjpp"),l=o("ohfOJ"),c=o("l29cN"),f=Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]},h=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.FileObjectsPage=e.exports.Files=void 0;var p=o("f8LhV"),d=(o("cGp6U"),o("cGp6U")),y=o("huaPE"),_=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&f(t,e,r);return h(t,e),t}(e.exports),d=o("cGp6U"),g=o("5kUHX"),b=function(e){(0,s._)(o,e);var t=(0,l._)(o);function o(){return(0,n._)(this,o),t.apply(this,arguments)}return(0,i._)(o,[{key:"create",value:function(e,t){return this._client.post("/files",(0,d.multipartFormRequestOptions)((0,a._)({body:e},t)))}},{key:"retrieve",value:function(e,t){return this._client.get("/files/".concat(e),t)}},{key:"list",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return(0,d.isRequestOptions)(e)?this.list({},e):this._client.getAPIList("/files",m,(0,a._)({query:e},t))}},{key:"del",value:function(e,t){return this._client.delete("/files/".concat(e),t)}},{key:"content",value:function(e,t){return this._client.get("/files/".concat(e,"/content"),(0,u._)((0,a._)({},t),{__binaryResponse:!0}))}},{key:"retrieveContent",value:function(e,t){return this._client.get("/files/".concat(e,"/content"),(0,u._)((0,a._)({},t),{headers:(0,a._)({Accept:"application/json"},null==t?void 0:t.headers)}))}},{key:"waitForProcessing",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.pollInterval,o=void 0===n?5e3:n,i=t.maxWait,s=void 0===i?18e5:i,a=this;return(0,r._)(function(){var t,r,n;return(0,c.__generator)(this,function(i){switch(i.label){case 0:return t=new Set(["processed","error","deleted"]),r=Date.now(),[4,a.retrieve(e)];case 1:n=i.sent(),i.label=2;case 2:if(!(!n.status||!t.has(n.status)))return[3,5];return[4,(0,d.sleep)(o)];case 3:return i.sent(),[4,a.retrieve(e)];case 4:if(n=i.sent(),Date.now()-r>s)throw new y.APIConnectionTimeoutError({message:"Giving up on waiting for file ".concat(e," to finish processing after ").concat(s," milliseconds.")});return[3,2];case 5:return[2,n]}})})()}}]),o}(p.APIResource);e.exports.Files=b;var m=function(e){(0,s._)(r,e);var t=(0,l._)(r);function r(){return(0,n._)(this,r),t.apply(this,arguments)}return r}(g.Page);e.exports.FileObjectsPage=m,(b=e.exports.Files||(e.exports.Files={})).FileObjectsPage=_.FileObjectsPage}),i("iQnBN",function(e,t){var r,n=o("4GJKx"),i=o("dcsZi"),s=o("ohfOJ"),a=Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]},u=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.FineTuning=void 0;var l=o("f8LhV"),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&a(t,e,r);return u(t,e),t}(o("2Ae6p")),f=function(e){(0,i._)(r,e);var t=(0,s._)(r);function r(){var e;return(0,n._)(this,r),e=t.call.apply(t,[this].concat(Array.prototype.slice.call(arguments))),e.jobs=new c.Jobs(e._client),e}return r}(l.APIResource);e.exports.FineTuning=f,(r=f=e.exports.FineTuning||(e.exports.FineTuning={})).Jobs=c.Jobs,r.FineTuningJobsPage=c.FineTuningJobsPage,r.FineTuningJobEventsPage=c.FineTuningJobEventsPage}),i("2Ae6p",function(e,t){var r,n=o("4GJKx"),i=o("1wc17"),s=o("dcsZi"),a=o("do9pw"),u=o("ohfOJ"),l=Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]},c=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.FineTuningJobEventsPage=e.exports.FineTuningJobsPage=e.exports.Jobs=void 0;var f=o("f8LhV"),h=o("cGp6U"),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&l(t,e,r);return c(t,e),t}(e.exports),d=o("5kUHX"),y=function(e){(0,s._)(r,e);var t=(0,u._)(r);function r(){return(0,n._)(this,r),t.apply(this,arguments)}return(0,i._)(r,[{key:"create",value:function(e,t){return this._client.post("/fine_tuning/jobs",(0,a._)({body:e},t))}},{key:"retrieve",value:function(e,t){return this._client.get("/fine_tuning/jobs/".concat(e),t)}},{key:"list",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return(0,h.isRequestOptions)(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",_,(0,a._)({query:e},t))}},{key:"cancel",value:function(e,t){return this._client.post("/fine_tuning/jobs/".concat(e,"/cancel"),t)}},{key:"listEvents",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return(0,h.isRequestOptions)(t)?this.listEvents(e,{},t):this._client.getAPIList("/fine_tuning/jobs/".concat(e,"/events"),g,(0,a._)({query:t},r))}}]),r}(f.APIResource);e.exports.Jobs=y;var _=function(e){(0,s._)(r,e);var t=(0,u._)(r);function r(){return(0,n._)(this,r),t.apply(this,arguments)}return r}(d.CursorPage);e.exports.FineTuningJobsPage=_;var g=function(e){(0,s._)(r,e);var t=(0,u._)(r);function r(){return(0,n._)(this,r),t.apply(this,arguments)}return r}(d.CursorPage);e.exports.FineTuningJobEventsPage=g,(r=y=e.exports.Jobs||(e.exports.Jobs={})).FineTuningJobsPage=p.FineTuningJobsPage,r.FineTuningJobEventsPage=p.FineTuningJobEventsPage}),i("2qBpa",function(e,t){var r=o("4GJKx"),n=o("1wc17"),i=o("dcsZi"),s=o("do9pw"),a=o("ohfOJ");Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Images=void 0;var u=o("f8LhV"),l=o("cGp6U"),c=function(e){(0,i._)(o,e);var t=(0,a._)(o);function o(){return(0,r._)(this,o),t.apply(this,arguments)}return(0,n._)(o,[{key:"createVariation",value:function(e,t){return this._client.post("/images/variations",(0,l.multipartFormRequestOptions)((0,s._)({body:e},t)))}},{key:"edit",value:function(e,t){return this._client.post("/images/edits",(0,l.multipartFormRequestOptions)((0,s._)({body:e},t)))}},{key:"generate",value:function(e,t){return this._client.post("/images/generations",(0,s._)({body:e},t))}}]),o}(u.APIResource);e.exports.Images=c,e.exports.Images||(e.exports.Images={})}),i("jZEll",function(e,t){var r=o("4GJKx"),n=o("1wc17"),i=o("dcsZi"),s=o("ohfOJ"),a=Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]},u=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ModelsPage=e.exports.Models=void 0;var l=o("f8LhV"),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&a(t,e,r);return u(t,e),t}(e.exports),f=o("5kUHX"),h=function(e){(0,i._)(o,e);var t=(0,s._)(o);function o(){return(0,r._)(this,o),t.apply(this,arguments)}return(0,n._)(o,[{key:"retrieve",value:function(e,t){return this._client.get("/models/".concat(e),t)}},{key:"list",value:function(e){return this._client.getAPIList("/models",p,e)}},{key:"del",value:function(e,t){return this._client.delete("/models/".concat(e),t)}}]),o}(l.APIResource);e.exports.Models=h;var p=function(e){(0,i._)(n,e);var t=(0,s._)(n);function n(){return(0,r._)(this,n),t.apply(this,arguments)}return n}(f.Page);e.exports.ModelsPage=p,(h=e.exports.Models||(e.exports.Models={})).ModelsPage=c.ModelsPage}),i("ayKvp",function(e,t){var r=o("4GJKx"),n=o("1wc17"),i=o("dcsZi"),s=o("do9pw"),a=o("ohfOJ");Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Moderations=void 0;var u=function(e){(0,i._)(o,e);var t=(0,a._)(o);function o(){return(0,r._)(this,o),t.apply(this,arguments)}return(0,n._)(o,[{key:"create",value:function(e,t){return this._client.post("/moderations",(0,s._)({body:e},t))}}]),o}(o("f8LhV").APIResource);e.exports.Moderations=u,e.exports.Moderations||(e.exports.Moderations={})});var s=o("kSuI9"),a=o("cv9Rk"),u=o("l29cN"),l=o("Pvjse"),c={},s=o("kSuI9"),f=o("4GJKx");function h(e,t){return t.get?t.get.call(e):t.value}function p(e,t,r){if(!t.has(e))throw TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}function d(e,t){var r=p(e,t,"get");return h(e,r)}function y(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}function _(e,t,r){y(e,t),t.set(e,r)}function g(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw TypeError("attempted to set read only private field");t.value=r}}function b(e,t,r){var n=p(e,t,"set");return g(e,n,r),r}function m(e,t){var r=p(e,t,"update");return function(e,t){if(t.set){if(!t.get)throw TypeError("attempted to read set only private field");return"__destrWrapper"in t||(t.__destrWrapper={set value(v){t.set.call(e,v)},get value(){return t.get.call(e)}}),t.__destrWrapper}if(!t.writable)throw TypeError("attempted to set read only private field");return t}(e,r)}function w(e,t,r){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return r}function x(e,t){y(e,t),t.add(e)}function O(e,t){if(e!==t)throw TypeError("Private static access of wrong provenance")}function P(e,t){if(void 0===e)throw TypeError("attempted to "+t+" private static field before its declaration")}function A(e,t,r,n){return O(e,t),P(r,"set"),g(e,r,n),n}var E=o("1wc17"),k=o("3sHb8"),S=o("dcsZi"),R=o("do9pw"),j=o("cxjpp"),a=o("cv9Rk"),I=o("c6Xmf"),C=o("FuVm8"),M=o("ohfOJ"),u=o("l29cN"),F=o("3qWgZ");Object.defineProperty(c,"__esModule",{value:!0}),c.LRUCache=void 0;var T="object"==typeof performance&&performance&&"function"==typeof performance.now?performance:Date,B=new Set,U="object"==typeof F&&F?F:{},L=function(e,t,r,n){"function"==typeof U.emitWarning?U.emitWarning(e,t,r,n):console.error("[".concat(r,"] ").concat(t,": ").concat(e))},N=globalThis.AbortController,W=globalThis.AbortSignal;if(void 0===N){W=function(){function e(){(0,f._)(this,e),(0,k._)(this,"onabort",void 0),(0,k._)(this,"_onabort",[]),(0,k._)(this,"reason",void 0),(0,k._)(this,"aborted",!1)}return(0,E._)(e,[{key:"addEventListener",value:function(e,t){this._onabort.push(t)}}]),e}(),N=function(){function e(){(0,f._)(this,e),(0,k._)(this,"signal",new W),q()}return(0,E._)(e,[{key:"abort",value:function(e){if(!this.signal.aborted){this.signal.reason=e,this.signal.aborted=!0;var t=!0,r=!1,n=void 0;try{for(var o,i,s,a=this.signal._onabort[Symbol.iterator]();!(t=(s=a.next()).done);t=!0)(0,s.value)(e)}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}null===(o=(i=this.signal).onabort)||void 0===o||o.call(i,e)}}}]),e}();var D,J=(null===(D=U.env)||void 0===D?void 0:D.LRU_CACHE_IGNORE_AC_WARNING)!=="1",q=function(){J&&(J=!1,L("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",q))}}Symbol("type");var G=function(e){return e&&e===Math.floor(e)&&e>0&&isFinite(e)},H=function(e){return G(e)?e<=256?Uint8Array:e<=65536?Uint16Array:e<=4294967296?Uint32Array:e<=Number.MAX_SAFE_INTEGER?z:null:null},z=function(e){(0,S._)(r,e);var t=(0,M._)(r);function r(e){var n;return(0,f._)(this,r),(n=t.call(this,e)).fill(0),n}return r}((0,C._)(Array)),V=function(){function e(t,r){if((0,f._)(this,e),(0,k._)(this,"heap",void 0),(0,k._)(this,"length",void 0),O(e,e),P(X,"get"),!h(e,X))throw TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(t),this.length=0}return(0,E._)(e,[{key:"push",value:function(e){this.heap[this.length++]=e}},{key:"pop",value:function(){return this.heap[--this.length]}}],[{key:"create",value:function(t){var r=H(t);if(!r)return[];A(e,e,X,!0);var n=new e(t,r);return A(e,e,X,!1),n}}]),e}(),X={writable:!0,value:!1},K=new WeakMap,Z=new WeakMap,Y=new WeakMap,Q=new WeakMap,$=new WeakMap,ee=new WeakMap,et=new WeakMap,er=new WeakMap,en=new WeakMap,eo=new WeakMap,ei=new WeakMap,es=new WeakMap,ea=new WeakMap,eu=new WeakMap,el=new WeakMap,ec=new WeakMap,ef=new WeakMap,eh=new WeakMap,ep=new WeakMap,ed=new WeakMap,ev=new WeakMap,ey=new WeakMap,e_=new WeakSet,eg=new WeakMap,eb=new WeakMap,em=new WeakMap,ew=new WeakMap,ex=new WeakSet,eO=new WeakMap,eP=new WeakMap,eA=new WeakMap,eE=new WeakSet,ek=new WeakSet,eS=new WeakSet,eR=new WeakSet,ej=new WeakSet,eI=new WeakSet,eC=new WeakSet,eM=new WeakSet,eF=Symbol.iterator,eT=Symbol.toStringTag,eB=function(){function e(t){(0,f._)(this,e),x(this,e_),x(this,ex),x(this,eE),x(this,ek),x(this,eS),x(this,eR),x(this,ej),x(this,eI),x(this,eC),x(this,eM),_(this,K,{writable:!0,value:void 0}),_(this,Z,{writable:!0,value:void 0}),_(this,Y,{writable:!0,value:void 0}),_(this,Q,{writable:!0,value:void 0}),_(this,$,{writable:!0,value:void 0}),(0,k._)(this,"ttl",void 0),(0,k._)(this,"ttlResolution",void 0),(0,k._)(this,"ttlAutopurge",void 0),(0,k._)(this,"updateAgeOnGet",void 0),(0,k._)(this,"updateAgeOnHas",void 0),(0,k._)(this,"allowStale",void 0),(0,k._)(this,"noDisposeOnSet",void 0),(0,k._)(this,"noUpdateTTL",void 0),(0,k._)(this,"maxEntrySize",void 0),(0,k._)(this,"sizeCalculation",void 0),(0,k._)(this,"noDeleteOnFetchRejection",void 0),(0,k._)(this,"noDeleteOnStaleGet",void 0),(0,k._)(this,"allowStaleOnFetchAbort",void 0),(0,k._)(this,"allowStaleOnFetchRejection",void 0),(0,k._)(this,"ignoreFetchAbort",void 0),_(this,ee,{writable:!0,value:void 0}),_(this,et,{writable:!0,value:void 0}),_(this,er,{writable:!0,value:void 0}),_(this,en,{writable:!0,value:void 0}),_(this,eo,{writable:!0,value:void 0}),_(this,ei,{writable:!0,value:void 0}),_(this,es,{writable:!0,value:void 0}),_(this,ea,{writable:!0,value:void 0}),_(this,eu,{writable:!0,value:void 0}),_(this,el,{writable:!0,value:void 0}),_(this,ec,{writable:!0,value:void 0}),_(this,ef,{writable:!0,value:void 0}),_(this,eh,{writable:!0,value:void 0}),_(this,ep,{writable:!0,value:void 0}),_(this,ed,{writable:!0,value:void 0}),_(this,ev,{writable:!0,value:void 0}),_(this,ey,{writable:!0,value:void 0}),_(this,eg,{writable:!0,value:function(){}}),_(this,eb,{writable:!0,value:function(){}}),_(this,em,{writable:!0,value:function(){}}),_(this,ew,{writable:!0,value:function(){return!1}}),_(this,eO,{writable:!0,value:function(e){}}),_(this,eP,{writable:!0,value:function(e,t,r){}}),_(this,eA,{writable:!0,value:function(e,t,r,n){if(r||n)throw TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0}}),(0,k._)(this,eT,"LRUCache");var r=t.max,n=void 0===r?0:r,o=t.ttl,i=t.ttlResolution,s=void 0===i?1:i,a=t.ttlAutopurge,u=t.updateAgeOnGet,l=t.updateAgeOnHas,c=t.allowStale,h=t.dispose,p=t.disposeAfter,y=t.noDisposeOnSet,g=t.noUpdateTTL,m=t.maxSize,O=t.maxEntrySize,P=t.sizeCalculation,A=t.fetchMethod,E=t.noDeleteOnFetchRejection,S=t.noDeleteOnStaleGet,R=t.allowStaleOnFetchRejection,j=t.allowStaleOnFetchAbort,I=t.ignoreFetchAbort;if(0!==n&&!G(n))throw TypeError("max option must be a nonnegative integer");var C=n?H(n):Array;if(!C)throw Error("invalid max value: "+n);if(b(this,K,n),b(this,Z,void 0===m?0:m),this.maxEntrySize=(void 0===O?0:O)||d(this,Z),this.sizeCalculation=P,this.sizeCalculation){if(!d(this,Z)&&!this.maxEntrySize)throw TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if("function"!=typeof this.sizeCalculation)throw TypeError("sizeCalculation set to non-function")}if(void 0!==A&&"function"!=typeof A)throw TypeError("fetchMethod must be a function if specified");if(b(this,$,A),b(this,ev,!!A),b(this,er,new Map),b(this,en,Array(n).fill(void 0)),b(this,eo,Array(n).fill(void 0)),b(this,ei,new C(n)),b(this,es,new C(n)),b(this,ea,0),b(this,eu,0),b(this,el,V.create(n)),b(this,ee,0),b(this,et,0),"function"==typeof h&&b(this,Y,h),"function"==typeof p?(b(this,Q,p),b(this,ec,[])):(b(this,Q,void 0),b(this,ec,void 0)),b(this,ed,!!d(this,Y)),b(this,ey,!!d(this,Q)),this.noDisposeOnSet=!!y,this.noUpdateTTL=!!g,this.noDeleteOnFetchRejection=!!E,this.allowStaleOnFetchRejection=!!R,this.allowStaleOnFetchAbort=!!j,this.ignoreFetchAbort=!!I,0!==this.maxEntrySize){if(0!==d(this,Z)&&!G(d(this,Z)))throw TypeError("maxSize must be a positive integer if specified");if(!G(this.maxEntrySize))throw TypeError("maxEntrySize must be a positive integer if specified");w(this,ex,eL).call(this)}if(this.allowStale=!!c,this.noDeleteOnStaleGet=!!S,this.updateAgeOnGet=!!u,this.updateAgeOnHas=!!l,this.ttlResolution=G(s)||0===s?s:1,this.ttlAutopurge=!!a,this.ttl=o||0,this.ttl){if(!G(this.ttl))throw TypeError("ttl must be a positive integer if specified");w(this,e_,eU).call(this)}if(0===d(this,K)&&0===this.ttl&&0===d(this,Z))throw TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!d(this,K)&&!d(this,Z)){var M="LRU_CACHE_UNBOUNDED";B.has(M)||(B.add(M),L("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",M,e))}}return(0,E._)(e,[{key:"max",get:function(){return d(this,K)}},{key:"maxSize",get:function(){return d(this,Z)}},{key:"calculatedSize",get:function(){return d(this,et)}},{key:"size",get:function(){return d(this,ee)}},{key:"fetchMethod",get:function(){return d(this,$)}},{key:"dispose",get:function(){return d(this,Y)}},{key:"disposeAfter",get:function(){return d(this,Q)}},{key:"getRemainingTTL",value:function(e){return d(this,er).has(e)?1/0:0}},{key:"entries",value:function(){var e,t,r,n,o,i,s;return(0,u.__generator)(this,function(a){switch(a.label){case 0:e=!0,t=!1,r=void 0,a.label=1;case 1:a.trys.push([1,6,7,8]),n=w(this,eE,eN).call(this)[Symbol.iterator](),a.label=2;case 2:if(e=(o=n.next()).done)return[3,5];if(i=o.value,!(void 0!==d(this,eo)[i]&&void 0!==d(this,en)[i]&&!w(this,eI,eG).call(this,d(this,eo)[i])))return[3,4];return[4,[d(this,en)[i],d(this,eo)[i]]];case 3:a.sent(),a.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return s=a.sent(),t=!0,r=s,[3,8];case 7:try{e||null==n.return||n.return()}finally{if(t)throw r}return[7];case 8:return[2]}})}},{key:"rentries",value:function(){var e,t,r,n,o,i,s;return(0,u.__generator)(this,function(a){switch(a.label){case 0:e=!0,t=!1,r=void 0,a.label=1;case 1:a.trys.push([1,6,7,8]),n=w(this,ek,eW).call(this)[Symbol.iterator](),a.label=2;case 2:if(e=(o=n.next()).done)return[3,5];if(i=o.value,!(void 0!==d(this,eo)[i]&&void 0!==d(this,en)[i]&&!w(this,eI,eG).call(this,d(this,eo)[i])))return[3,4];return[4,[d(this,en)[i],d(this,eo)[i]]];case 3:a.sent(),a.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return s=a.sent(),t=!0,r=s,[3,8];case 7:try{e||null==n.return||n.return()}finally{if(t)throw r}return[7];case 8:return[2]}})}},{key:"keys",value:function(){var e,t,r,n,o,i,s,a;return(0,u.__generator)(this,function(u){switch(u.label){case 0:e=!0,t=!1,r=void 0,u.label=1;case 1:u.trys.push([1,6,7,8]),n=w(this,eE,eN).call(this)[Symbol.iterator](),u.label=2;case 2:if(e=(o=n.next()).done)return[3,5];if(i=o.value,!(void 0!==(s=d(this,en)[i])&&!w(this,eI,eG).call(this,d(this,eo)[i])))return[3,4];return[4,s];case 3:u.sent(),u.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return a=u.sent(),t=!0,r=a,[3,8];case 7:try{e||null==n.return||n.return()}finally{if(t)throw r}return[7];case 8:return[2]}})}},{key:"rkeys",value:function(){var e,t,r,n,o,i,s,a;return(0,u.__generator)(this,function(u){switch(u.label){case 0:e=!0,t=!1,r=void 0,u.label=1;case 1:u.trys.push([1,6,7,8]),n=w(this,ek,eW).call(this)[Symbol.iterator](),u.label=2;case 2:if(e=(o=n.next()).done)return[3,5];if(i=o.value,!(void 0!==(s=d(this,en)[i])&&!w(this,eI,eG).call(this,d(this,eo)[i])))return[3,4];return[4,s];case 3:u.sent(),u.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return a=u.sent(),t=!0,r=a,[3,8];case 7:try{e||null==n.return||n.return()}finally{if(t)throw r}return[7];case 8:return[2]}})}},{key:"values",value:function(){var e,t,r,n,o,i,s;return(0,u.__generator)(this,function(a){switch(a.label){case 0:e=!0,t=!1,r=void 0,a.label=1;case 1:a.trys.push([1,6,7,8]),n=w(this,eE,eN).call(this)[Symbol.iterator](),a.label=2;case 2:if(e=(o=n.next()).done)return[3,5];if(i=o.value,!(void 0!==d(this,eo)[i]&&!w(this,eI,eG).call(this,d(this,eo)[i])))return[3,4];return[4,d(this,eo)[i]];case 3:a.sent(),a.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return s=a.sent(),t=!0,r=s,[3,8];case 7:try{e||null==n.return||n.return()}finally{if(t)throw r}return[7];case 8:return[2]}})}},{key:"rvalues",value:function(){var e,t,r,n,o,i,s;return(0,u.__generator)(this,function(a){switch(a.label){case 0:e=!0,t=!1,r=void 0,a.label=1;case 1:a.trys.push([1,6,7,8]),n=w(this,ek,eW).call(this)[Symbol.iterator](),a.label=2;case 2:if(e=(o=n.next()).done)return[3,5];if(i=o.value,!(void 0!==d(this,eo)[i]&&!w(this,eI,eG).call(this,d(this,eo)[i])))return[3,4];return[4,d(this,eo)[i]];case 3:a.sent(),a.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return s=a.sent(),t=!0,r=s,[3,8];case 7:try{e||null==n.return||n.return()}finally{if(t)throw r}return[7];case 8:return[2]}})}},{key:eF,value:function(){return this.entries()}},{key:"find",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=!0,n=!1,o=void 0;try{for(var i,s=w(this,eE,eN).call(this)[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var a=i.value,u=d(this,eo)[a],l=w(this,eI,eG).call(this,u)?u.__staleWhileFetching:u;if(void 0!==l&&e(l,d(this,en)[a],this))return this.get(d(this,en)[a],t)}}catch(e){n=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(n)throw o}}}},{key:"forEach",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,r=!0,n=!1,o=void 0;try{for(var i,s=w(this,eE,eN).call(this)[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var a=i.value,u=d(this,eo)[a],l=w(this,eI,eG).call(this,u)?u.__staleWhileFetching:u;void 0!==l&&e.call(t,l,d(this,en)[a],this)}}catch(e){n=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(n)throw o}}}},{key:"rforEach",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,r=!0,n=!1,o=void 0;try{for(var i,s=w(this,ek,eW).call(this)[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var a=i.value,u=d(this,eo)[a],l=w(this,eI,eG).call(this,u)?u.__staleWhileFetching:u;void 0!==l&&e.call(t,l,d(this,en)[a],this)}}catch(e){n=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(n)throw o}}}},{key:"purgeStale",value:function(){var e=!1,t=!0,r=!1,n=void 0;try{for(var o,i=w(this,ek,eW).call(this,{allowStale:!0})[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var s=o.value;d(this,ew).call(this,s)&&(this.delete(d(this,en)[s]),e=!0)}}catch(e){r=!0,n=e}finally{try{t||null==i.return||i.return()}finally{if(r)throw n}}return e}},{key:"info",value:function(e){var t=d(this,er).get(e);if(void 0!==t){var r=d(this,eo)[t],n=w(this,eI,eG).call(this,r)?r.__staleWhileFetching:r;if(void 0!==n){var o={value:n};if(d(this,ep)&&d(this,eh)){var i=d(this,ep)[t],s=d(this,eh)[t];if(i&&s){var a=i-(T.now()-s);o.ttl=a,o.start=Date.now()}}return d(this,ef)&&(o.size=d(this,ef)[t]),o}}}},{key:"dump",value:function(){var e=[],t=!0,r=!1,n=void 0;try{for(var o,i=w(this,eE,eN).call(this,{allowStale:!0})[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var s=o.value,a=d(this,en)[s],u=d(this,eo)[s],l=w(this,eI,eG).call(this,u)?u.__staleWhileFetching:u;if(void 0!==l&&void 0!==a){var c={value:l};if(d(this,ep)&&d(this,eh)){c.ttl=d(this,ep)[s];var f=T.now()-d(this,eh)[s];c.start=Math.floor(Date.now()-f)}d(this,ef)&&(c.size=d(this,ef)[s]),e.unshift([a,c])}}}catch(e){r=!0,n=e}finally{try{t||null==i.return||i.return()}finally{if(r)throw n}}return e}},{key:"load",value:function(e){this.clear();var t=!0,r=!1,n=void 0;try{for(var o,i=e[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var s=(0,a._)(o.value,2),u=s[0],l=s[1];if(l.start){var c=Date.now()-l.start;l.start=T.now()-c}this.set(u,l.value,l)}}catch(e){r=!0,n=e}finally{try{t||null==i.return||i.return()}finally{if(r)throw n}}}},{key:"set",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(void 0===t)return this.delete(e),this;var n=r.ttl,o=void 0===n?this.ttl:n,i=r.start,s=r.noDisposeOnSet,a=void 0===s?this.noDisposeOnSet:s,u=r.sizeCalculation,l=void 0===u?this.sizeCalculation:u,c=r.status,f=r.noUpdateTTL,h=void 0===f?this.noUpdateTTL:f,p=d(this,eA).call(this,e,t,r.size||0,l);if(this.maxEntrySize&&p>this.maxEntrySize)return c&&(c.set="miss",c.maxEntrySizeExceeded=!0),this.delete(e),this;var y=0===d(this,ee)?void 0:d(this,er).get(e);if(void 0===y)y=0===d(this,ee)?d(this,eu):0!==d(this,el).length?d(this,el).pop():d(this,ee)===d(this,K)?w(this,eR,eJ).call(this,!1):d(this,ee),d(this,en)[y]=e,d(this,eo)[y]=t,d(this,er).set(e,y),d(this,ei)[d(this,eu)]=y,d(this,es)[y]=d(this,eu),b(this,eu,y),m(this,ee).value++,d(this,eP).call(this,y,p,c),c&&(c.set="add"),h=!1;else{w(this,eM,ez).call(this,y);var _=d(this,eo)[y];if(t!==_){if(d(this,ev)&&w(this,eI,eG).call(this,_)){_.__abortController.abort(Error("replaced"));var g,x,O,P,A,E=_.__staleWhileFetching;void 0!==E&&!a&&(d(this,ed)&&(null===(g=d(this,Y))||void 0===g||g.call(this,E,e,"set")),d(this,ey)&&(null===(A=d(this,ec))||void 0===A||A.push([E,e,"set"])))}else!a&&(d(this,ed)&&(null===(x=d(this,Y))||void 0===x||x.call(this,_,e,"set")),d(this,ey)&&(null===(P=d(this,ec))||void 0===P||P.push([_,e,"set"])));if(d(this,eO).call(this,y),d(this,eP).call(this,y,p,c),d(this,eo)[y]=t,c){c.set="replace";var k=_&&w(this,eI,eG).call(this,_)?_.__staleWhileFetching:_;void 0!==k&&(c.oldValue=k)}}else c&&(c.set="update")}if(0===o||d(this,ep)||w(this,e_,eU).call(this),d(this,ep)&&(h||d(this,em).call(this,y,o,i),c&&d(this,eb).call(this,c,y)),!a&&d(this,ey)&&d(this,ec))for(var S,R=d(this,ec);S=null==R?void 0:R.shift();)null===(O=d(this,Q))||void 0===O||O.call.apply(O,[this].concat((0,I._)(S)));return this}},{key:"pop",value:function(){var e;try{for(;d(this,ee);){var t=d(this,eo)[d(this,ea)];if(w(this,eR,eJ).call(this,!0),w(this,eI,eG).call(this,t)){if(t.__staleWhileFetching)return t.__staleWhileFetching}else if(void 0!==t)return t}}finally{if(d(this,ey)&&d(this,ec))for(var r,n=d(this,ec);r=null==n?void 0:n.shift();)null===(e=d(this,Q))||void 0===e||e.call.apply(e,[this].concat((0,I._)(r)))}}},{key:"has",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.updateAgeOnHas,n=void 0===r?this.updateAgeOnHas:r,o=t.status,i=d(this,er).get(e);if(void 0!==i){var s=d(this,eo)[i];if(w(this,eI,eG).call(this,s)&&void 0===s.__staleWhileFetching)return!1;if(!d(this,ew).call(this,i))return n&&d(this,eg).call(this,i),o&&(o.has="hit",d(this,eb).call(this,o,i)),!0;o&&(o.has="stale",d(this,eb).call(this,o,i))}else o&&(o.has="miss");return!1}},{key:"peek",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.allowStale,n=void 0===r?this.allowStale:r,o=d(this,er).get(e);if(!(void 0===o||!n&&d(this,ew).call(this,o))){var i=d(this,eo)[o];return w(this,eI,eG).call(this,i)?i.__staleWhileFetching:i}}},{key:"fetch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this;return(0,s._)(function(){var n,o,i,s,a,l,c,f,h,p,y,_,g,b,m,x,O,P,A,E,k,S,R,j,I,C,M,F,T,B,U,L,N,W,D,J,q;return(0,u.__generator)(this,function(u){return(o=void 0===(n=t.allowStale)?r.allowStale:n,s=void 0===(i=t.updateAgeOnGet)?r.updateAgeOnGet:i,l=void 0===(a=t.noDeleteOnStaleGet)?r.noDeleteOnStaleGet:a,f=void 0===(c=t.ttl)?r.ttl:c,p=void 0===(h=t.noDisposeOnSet)?r.noDisposeOnSet:h,_=void 0===(y=t.size)?0:y,b=void 0===(g=t.sizeCalculation)?r.sizeCalculation:g,x=void 0===(m=t.noUpdateTTL)?r.noUpdateTTL:m,P=void 0===(O=t.noDeleteOnFetchRejection)?r.noDeleteOnFetchRejection:O,E=void 0===(A=t.allowStaleOnFetchRejection)?r.allowStaleOnFetchRejection:A,S=void 0===(k=t.ignoreFetchAbort)?r.ignoreFetchAbort:k,j=void 0===(R=t.allowStaleOnFetchAbort)?r.allowStaleOnFetchAbort:R,I=t.context,M=void 0!==(C=t.forceRefresh)&&C,F=t.status,T=t.signal,d(r,ev))?(B={allowStale:o,updateAgeOnGet:s,noDeleteOnStaleGet:l,ttl:f,noDisposeOnSet:p,size:_,sizeCalculation:b,noUpdateTTL:x,noDeleteOnFetchRejection:P,allowStaleOnFetchRejection:E,allowStaleOnFetchAbort:j,ignoreFetchAbort:S,status:F,signal:T},void 0===(U=d(r,er).get(e)))?(F&&(F.fetch="miss"),[2,(L=w(r,ej,eq).call(r,e,U,B,I)).__returned=L]):(N=d(r,eo)[U],w(r,eI,eG).call(r,N))?(W=o&&void 0!==N.__staleWhileFetching,F&&(F.fetch="inflight",W&&(F.returnedStale=!0)),[2,W?N.__staleWhileFetching:N.__returned=N]):(D=d(r,ew).call(r,U),M||D)?(q=void 0!==(J=w(r,ej,eq).call(r,e,U,B,I)).__staleWhileFetching&&o,F&&(F.fetch=D?"stale":"refresh",q&&D&&(F.returnedStale=!0)),[2,q?J.__staleWhileFetching:J.__returned=J]):(F&&(F.fetch="hit"),w(r,eM,ez).call(r,U),s&&d(r,eg).call(r,U),F&&d(r,eb).call(r,F,U),[2,N]):(F&&(F.fetch="get"),[2,r.get(e,{allowStale:o,updateAgeOnGet:s,noDeleteOnStaleGet:l,status:F})])})})()}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.allowStale,n=void 0===r?this.allowStale:r,o=t.updateAgeOnGet,i=void 0===o?this.updateAgeOnGet:o,s=t.noDeleteOnStaleGet,a=void 0===s?this.noDeleteOnStaleGet:s,u=t.status,l=d(this,er).get(e);if(void 0!==l){var c=d(this,eo)[l],f=w(this,eI,eG).call(this,c);return(u&&d(this,eb).call(this,u,l),d(this,ew).call(this,l))?(u&&(u.get="stale"),f)?(u&&n&&void 0!==c.__staleWhileFetching&&(u.returnedStale=!0),n?c.__staleWhileFetching:void 0):(a||this.delete(e),u&&n&&(u.returnedStale=!0),n?c:void 0):(u&&(u.get="hit"),f)?c.__staleWhileFetching:(w(this,eM,ez).call(this,l),i&&d(this,eg).call(this,l),c)}u&&(u.get="miss")}},{key:"delete",value:function(e){var t=!1;if(0!==d(this,ee)){var r=d(this,er).get(e);if(void 0!==r){if(t=!0,1===d(this,ee))this.clear();else{d(this,eO).call(this,r);var n,o,i,s,a=d(this,eo)[r];if(w(this,eI,eG).call(this,a)?a.__abortController.abort(Error("deleted")):(d(this,ed)||d(this,ey))&&(d(this,ed)&&(null===(o=d(this,Y))||void 0===o||o.call(this,a,e,"delete")),d(this,ey)&&(null===(s=d(this,ec))||void 0===s||s.push([a,e,"delete"]))),d(this,er).delete(e),d(this,en)[r]=void 0,d(this,eo)[r]=void 0,r===d(this,eu))b(this,eu,d(this,es)[r]);else if(r===d(this,ea))b(this,ea,d(this,ei)[r]);else{var u=d(this,es)[r];d(this,ei)[u]=d(this,ei)[r];var l=d(this,ei)[r];d(this,es)[l]=d(this,es)[r]}m(this,ee).value--,d(this,el).push(r)}}}if(d(this,ey)&&(null===(n=d(this,ec))||void 0===n?void 0:n.length))for(var c,f=d(this,ec);c=null==f?void 0:f.shift();)null===(i=d(this,Q))||void 0===i||i.call.apply(i,[this].concat((0,I._)(c)));return t}},{key:"clear",value:function(){var e=!0,t=!1,r=void 0;try{for(var n,o,i,s=w(this,ek,eW).call(this,{allowStale:!0})[Symbol.iterator]();!(e=(i=s.next()).done);e=!0){var a=i.value,u=d(this,eo)[a];if(w(this,eI,eG).call(this,u))u.__abortController.abort(Error("deleted"));else{var l,c=d(this,en)[a];d(this,ed)&&(null===(n=d(this,Y))||void 0===n||n.call(this,u,c,"delete")),d(this,ey)&&(null===(l=d(this,ec))||void 0===l||l.push([u,c,"delete"]))}}}catch(e){t=!0,r=e}finally{try{e||null==s.return||s.return()}finally{if(t)throw r}}if(d(this,er).clear(),d(this,eo).fill(void 0),d(this,en).fill(void 0),d(this,ep)&&d(this,eh)&&(d(this,ep).fill(0),d(this,eh).fill(0)),d(this,ef)&&d(this,ef).fill(0),b(this,ea,0),b(this,eu,0),d(this,el).length=0,b(this,et,0),b(this,ee,0),d(this,ey)&&d(this,ec))for(var f,h=d(this,ec);f=null==h?void 0:h.shift();)null===(o=d(this,Q))||void 0===o||o.call.apply(o,[this].concat((0,I._)(f)))}}],[{key:"unsafeExposeInternals",value:function(e){return{starts:d(e,eh),ttls:d(e,ep),sizes:d(e,ef),keyMap:d(e,er),keyList:d(e,en),valList:d(e,eo),next:d(e,ei),prev:d(e,es),get head(){return d(e,ea)},get tail(){return d(e,eu)},free:d(e,el),isBackgroundFetch:function(t){return w(e,eI,eG).call(e,t)},backgroundFetch:function(t,r,n,o){return w(e,ej,eq).call(e,t,r,n,o)},moveToTail:function(t){return w(e,eM,ez).call(e,t)},indexes:function(t){return w(e,eE,eN).call(e,t)},rindexes:function(t){return w(e,ek,eW).call(e,t)},isStale:function(t){return d(e,ew).call(e,t)}}}}]),e}();function eU(){var e=this,t=new z(d(this,K)),r=new z(d(this,K));b(this,ep,t),b(this,eh,r),b(this,em,function(n,o){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:T.now();if(r[n]=0!==o?i:0,t[n]=o,0!==o&&e.ttlAutopurge){var s=setTimeout(function(){d(e,ew).call(e,n)&&e.delete(d(e,en)[n])},o+1);s.unref&&s.unref()}}),b(this,eg,function(e){r[e]=0!==t[e]?T.now():0}),b(this,eb,function(e,i){if(t[i]){var s=t[i],a=r[i];if(s&&a){e.ttl=s,e.start=a,e.now=n||o();var u=e.now-a;e.remainingTTL=s-u}}});var n=0,o=function(){var t=T.now();if(e.ttlResolution>0){n=t;var r=setTimeout(function(){return n=0},e.ttlResolution);r.unref&&r.unref()}return t};this.getRemainingTTL=function(i){var s=d(e,er).get(i);if(void 0===s)return 0;var a=t[s],u=r[s];return a&&u?a-((n||o())-u):1/0},b(this,ew,function(e){var i=r[e],s=t[e];return!!s&&!!i&&(n||o())-i>s})}function eL(){var e=this,t=new z(d(this,K));b(this,et,0),b(this,ef,t),b(this,eO,function(r){b(e,et,d(e,et)-t[r]),t[r]=0}),b(this,eA,function(t,r,n,o){if(w(e,eI,eG).call(e,r))return 0;if(!G(n)){if(o){if("function"!=typeof o)throw TypeError("sizeCalculation must be a function");if(!G(n=o(r,t)))throw TypeError("sizeCalculation return invalid (expect positive integer)")}else throw TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.")}return n}),b(this,eP,function(r,n,o){if(t[r]=n,d(e,Z))for(var i=d(e,Z)-t[r];d(e,et)>i;)w(e,eR,eJ).call(e,!0);b(e,et,d(e,et)+t[r]),o&&(o.entrySize=n,o.totalCalculatedSize=d(e,et))})}function eN(){var e,t,r,n=arguments;return(0,u.__generator)(this,function(o){switch(o.label){case 0:if(t=void 0===(e=(n.length>0&&void 0!==n[0]?n[0]:{}).allowStale)?this.allowStale:e,!d(this,ee))return[3,5];r=d(this,eu),o.label=1;case 1:if(!w(this,eS,eD).call(this,r))return[3,5];if(!(t||!d(this,ew).call(this,r)))return[3,3];return[4,r];case 2:o.sent(),o.label=3;case 3:if(r===d(this,ea))return[3,5];r=d(this,es)[r],o.label=4;case 4:return[3,1];case 5:return[2]}})}function eW(){var e,t,r,n=arguments;return(0,u.__generator)(this,function(o){switch(o.label){case 0:if(t=void 0===(e=(n.length>0&&void 0!==n[0]?n[0]:{}).allowStale)?this.allowStale:e,!d(this,ee))return[3,5];r=d(this,ea),o.label=1;case 1:if(!w(this,eS,eD).call(this,r))return[3,5];if(!(t||!d(this,ew).call(this,r)))return[3,3];return[4,r];case 2:o.sent(),o.label=3;case 3:if(r===d(this,eu))return[3,5];r=d(this,ei)[r],o.label=4;case 4:return[3,1];case 5:return[2]}})}function eD(e){return void 0!==e&&d(this,er).get(d(this,en)[e])===e}function eJ(e){var t,r,n=d(this,ea),o=d(this,en)[n],i=d(this,eo)[n];return d(this,ev)&&w(this,eI,eG).call(this,i)?i.__abortController.abort(Error("evicted")):(d(this,ed)||d(this,ey))&&(d(this,ed)&&(null===(t=d(this,Y))||void 0===t||t.call(this,i,o,"evict")),d(this,ey)&&(null===(r=d(this,ec))||void 0===r||r.push([i,o,"evict"]))),d(this,eO).call(this,n),e&&(d(this,en)[n]=void 0,d(this,eo)[n]=void 0,d(this,el).push(n)),1===d(this,ee)?(b(this,ea,b(this,eu,0)),d(this,el).length=0):b(this,ea,d(this,ei)[n]),d(this,er).delete(o),m(this,ee).value--,n}function eq(e,t,r,n){var o,i,s=this,a=void 0===t?void 0:d(this,eo)[t];if(w(this,eI,eG).call(this,a))return a;var u=new N,l=r.signal;null==l||l.addEventListener("abort",function(){return u.abort(l.reason)},{signal:u.signal});var c={signal:u.signal,options:r,context:n},f=function(n){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=u.signal.aborted,a=r.ignoreFetchAbort&&void 0!==n;return(r.status&&(i&&!o?(r.status.fetchAborted=!0,r.status.fetchError=u.signal.reason,a&&(r.status.fetchAbortIgnored=!0)):r.status.fetchResolved=!0),!i||a||o)?(d(s,eo)[t]===p&&(void 0===n?p.__staleWhileFetching?d(s,eo)[t]=p.__staleWhileFetching:s.delete(e):(r.status&&(r.status.fetchUpdated=!0),s.set(e,n,c.options))),n):h(u.signal.reason)},h=function(n){var o=u.signal.aborted&&r.allowStaleOnFetchAbort,i=o||r.allowStaleOnFetchRejection,a=i||r.noDeleteOnFetchRejection;if(d(s,eo)[t]!==p||(a&&void 0!==p.__staleWhileFetching?o||(d(s,eo)[t]=p.__staleWhileFetching):s.delete(e)),i)return r.status&&void 0!==p.__staleWhileFetching&&(r.status.returnedStale=!0),p.__staleWhileFetching;if(p.__returned===p)throw n};r.status&&(r.status.fetchDispatched=!0);var p=new Promise(function(t,n){var l=null===(o=d(i=s,$))||void 0===o?void 0:o.call(i,e,a,c);l&&l instanceof Promise&&l.then(function(e){return t(void 0===e?void 0:e)},n),u.signal.addEventListener("abort",function(){(!r.ignoreFetchAbort||r.allowStaleOnFetchAbort)&&(t(void 0),r.allowStaleOnFetchAbort&&(t=function(e){return f(e,!0)}))})}).then(f,function(e){return r.status&&(r.status.fetchRejected=!0,r.status.fetchError=e),h(e)}),y=Object.assign(p,{__abortController:u,__staleWhileFetching:a,__returned:void 0});return void 0===t?(this.set(e,y,(0,j._)((0,R._)({},c.options),{status:void 0})),t=d(this,er).get(e)):d(this,eo)[t]=y,y}function eG(e){return!!d(this,ev)&&!!e&&e instanceof Promise&&e.hasOwnProperty("__staleWhileFetching")&&e.__abortController instanceof N}function eH(e,t){d(this,es)[t]=e,d(this,ei)[e]=t}function ez(e){e!==d(this,eu)&&(e===d(this,ea)?b(this,ea,d(this,ei)[e]):w(this,eC,eH).call(this,d(this,es)[e],d(this,ei)[e]),w(this,eC,eH).call(this,d(this,eu),e),b(this,eu,e))}c.LRUCache=eB;var eV=new c.LRUCache({max:500});function eX(e){return new Promise(function(t,r){chrome.storage.local.get(e,function(n){if(chrome.runtime.lastError)return r(chrome.runtime.lastError);t(String(n[e]))})})}function eK(){return(eK=(0,s._)(function(e,t){var r;return(0,u.__generator)(this,function(n){return eV.has(t)?[2,eV.get(t)]:(r=(0,s._)(function(){var r,n,o,i,s,l;return(0,u.__generator)(this,function(u){switch(u.label){case 0:var c,f;return u.trys.push([0,2,,3]),c=e.prompt_template,f=e.prompt_instructions,r=c.replace("{tweet}",t).replace("{prompt_instructions}",f),n={model:e.model.id,prompt:r,max_tokens:1,logprobs:10,stream:!1},[4,e.openai_client.completions.create(n)];case 1:return i=(o=function(e){var t=[],r=[],n=!0,o=!1,i=void 0;try{for(var s,u=Object.entries(e.top_logprobs[0])[Symbol.iterator]();!(n=(s=u.next()).done);n=!0){var l=(0,a._)(s.value,2),c=l[0],f=l[1];"YES"===c.toUpperCase()||"Y"===c.toUpperCase()?t.push(f):("NO"===c.toUpperCase()||"N"===c.toUpperCase())&&r.push(f)}}catch(e){o=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}var h=t.reduce(function(e,t){return e+Math.exp(t)},0),p=r.reduce(function(e,t){return e+Math.exp(t)},0);return{log_probs:e,yes_prob:h/(h+p),no_prob:p/(h+p)}}(u.sent().choices[0].logprobs)).yes_prob,(l=(s=o.no_prob)>e.hide_threshold)&&console.log("Hiding tweet:",t,"yes_prob:",i,"no_prob:",s),[2,l];case 2:return console.error("Error:",u.sent()),[2,!1];case 3:return[2]}})})(),eV.set(t,r),[2,r])})})).apply(this,arguments)}function eZ(e){return eY.apply(this,arguments)}function eY(){return(eY=(0,s._)(function(e){var t,r,n,o,i,s,a,l,c;return(0,u.__generator)(this,function(u){switch(u.label){case 0:t='div[data-testid="tweetText"]',r=!0,n=!1,o=void 0,u.label=1;case 1:u.trys.push([1,6,7,8]),i=document.querySelectorAll(t)[Symbol.iterator](),u.label=2;case 2:if(r=(s=i.next()).done)return[3,5];return[4,function(e,t){return eK.apply(this,arguments)}(e,(a=s.value).textContent)];case 3:u.sent()&&(l=a.closest("article"))&&(l.style.display="none"),u.label=4;case 4:return r=!0,[3,2];case 5:return[3,8];case 6:return c=u.sent(),n=!0,o=c,[3,8];case 7:try{r||null==i.return||i.return()}finally{if(n)throw o}return[7];case 8:return[2]}})})).apply(this,arguments)}function eQ(){return(eQ=(0,s._)(function(){var e,t,r,n,o,i,s,a;return(0,u.__generator)(this,function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),[4,eX("apiUrl")];case 1:return console.log("Using API URL:",e=u.sent()),[4,(t=new l.OpenAI({baseURL:e,apiKey:"NONE",dangerouslyAllowBrowser:!0})).models.list()];case 2:return console.log("Using model:",r=u.sent().data[0]),[4,eX("prompt_template")];case 3:return console.log("Using prompt template:",n=u.sent()),[4,eX("prompt_instructions")];case 4:return console.log("Using prompt instructions:",o=u.sent()),[4,eX("hide_threshold")];case 5:return console.log("Got hide threshold str:",i=u.sent()),console.log("Using hide threshold:",s=parseFloat(i)),[2,{openai_client:t,model:r,prompt_template:n,prompt_instructions:o,hide_threshold:s}];case 6:throw console.error("Error:",a=u.sent()),a;case 7:return[2]}})})).apply(this,arguments)}console.log("Cache size:",eV.size),eZ().then(function(){console.log("Done hiding existing tweets")}),(function(){return eQ.apply(this,arguments)})().then(function(e){eZ(e).then(function(){console.log("Done hiding existing tweets")});var t=new MutationObserver(function(t){t.forEach(function(t){"childList"===t.type&&t.addedNodes.length>0&&eZ(e).then(function(){console.log("Done hiding new tweets")})})}),r=document.body;t.observe(r,{childList:!0,subtree:!0})}).catch(function(e){console.error("Error initializing client:",e)})}();
//# sourceMappingURL=content.js.map
